def heuristics_v2(df):
    # Calculate gain and loss for RSI
    delta_close = df['close'].diff()
    gain_21 = (delta_close.where(delta_close > 0, 0)).rolling(window=21).mean()
    loss_21 = (-delta_close.where(delta_close < 0, 0)).rolling(window=21).mean()
    rsi_21 = 100 - (100 / (1 + gain_21 / loss_21))
    
    gain_42 = (delta_close.where(delta_close > 0, 0)).rolling(window=42).mean()
    loss_42 = (-delta_close.where(delta_close < 0, 0)).rolling(window=42).mean()
    rsi_42 = 100 - (100 / (1 + gain_42 / loss_42))
    
    # Calculate RSI ratio
    rsi_ratio = rsi_21 / rsi_42
    
    # Calculate 20-day EMA of volume
    ema_20_volume = df['volume'].ewm(span=20, adjust=False).mean()
    
    # Calculate 10-day sum of true range
    tr = df['high'] - df['low']
    sum_10_tr = tr.rolling(window=10).sum()
    
    # Heuristic score calculation
    heuristics_matrix = rsi_ratio + (ema_20_volume * sum_10_tr)
    
    return heuristics_matrix
