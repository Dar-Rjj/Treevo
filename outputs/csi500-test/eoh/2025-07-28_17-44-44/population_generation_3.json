[
     {
          "algorithm": "The new algorithm computes the alpha factor by taking the difference between 20-day and 40-day EMAs of the closing price, then subtracting a term that scales the 10-day EMA of the volume by the mean of the close prices over 10 days.",
          "code": "def heuristics_v2(df):\n    # Calculate 20-day and 40-day EMAs of close prices\n    ema_20_close = df['close'].ewm(span=20, adjust=False).mean()\n    ema_40_close = df['close'].ewm(span=40, adjust=False).mean()\n\n    # Difference between EMAs of close prices\n    diff_ema_close = ema_20_close - ema_40_close\n\n    # Calculate 10-day EMA of volume\n    ema_10_volume = df['volume'].ewm(span=10, adjust=False).mean()\n\n    # Calculate 10-day mean of close prices\n    mean_10_close = df['close'].rolling(window=10).mean()\n\n    # Heuristic score calculation\n    heuristics_matrix = diff_ema_close - (ema_10_volume * mean_10_close)\n\n    return heuristics_matrix",
          "objective": -0.04377,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates the alpha factor by combining the 20-day to 40-day RSI ratio of the closing prices with a term that adjusts the 10-day EMA of the volume using the mean of the last 10 days' closing prices.",
          "code": "def heuristics_v2(df):\n    delta_close = df['close'].diff()\n    gain_20 = (delta_close.where(delta_close > 0, 0)).rolling(window=20).mean()\n    loss_20 = (-delta_close.where(delta_close < 0, 0)).rolling(window=20).mean()\n    rsi_20 = 100 - (100 / (1 + gain_20 / loss_20))\n    \n    gain_40 = (delta_close.where(delta_close > 0, 0)).rolling(window=40).mean()\n    loss_40 = (-delta_close.where(delta_close < 0, 0)).rolling(window=40).mean()\n    rsi_40 = 100 - (100 / (1 + gain_40 / loss_40))\n    \n    rsi_ratio = rsi_20 / rsi_40\n    \n    ema_10_volume = df['volume'].ewm(span=10, adjust=False).mean()\n    mean_10_close = df['close'].rolling(window=10).mean()\n    \n    heuristics_matrix = rsi_ratio - (ema_10_volume * mean_10_close)\n    \n    return heuristics_matrix",
          "objective": -0.04372,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates the alpha factor by combining the 21-day to 42-day RSI ratio of the closing prices with a term that adjusts the 10-day EMA of the volume using the median of the last 10 days' closing prices.",
          "code": "def heuristics_v2(df):\n    delta_close = df['close'].diff()\n    gain_21 = (delta_close.where(delta_close > 0, 0)).rolling(window=21).mean()\n    loss_21 = (-delta_close.where(delta_close < 0, 0)).rolling(window=21).mean()\n    rsi_21 = 100 - (100 / (1 + gain_21 / loss_21))\n    \n    gain_42 = (delta_close.where(delta_close > 0, 0)).rolling(window=42).mean()\n    loss_42 = (-delta_close.where(delta_close < 0, 0)).rolling(window=42).mean()\n    rsi_42 = 100 - (100 / (1 + gain_42 / loss_42))\n    \n    rsi_ratio = rsi_21 / rsi_42\n    \n    ema_10_volume = df['volume'].ewm(span=10, adjust=False).mean()\n    median_10_close = df['close'].rolling(window=10).median()\n    \n    heuristics_matrix = rsi_ratio - (ema_10_volume * median_10_close)\n    \n    return heuristics_matrix",
          "objective": -0.04354,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates the alpha factor by combining the 14-day to 28-day RSI ratio of the closing prices with a term that adjusts the 5-day EMA of the volume using the mean of the last 5 days' closing prices, instead of the standard deviation.",
          "code": "def heuristics_v2(df):\n    delta_close = df['close'].diff()\n    gain_14 = (delta_close.where(delta_close > 0, 0)).rolling(window=14).mean()\n    loss_14 = (-delta_close.where(delta_close < 0, 0)).rolling(window=14).mean()\n    rsi_14 = 100 - (100 / (1 + gain_14 / loss_14))\n    \n    gain_28 = (delta_close.where(delta_close > 0, 0)).rolling(window=28).mean()\n    loss_28 = (-delta_close.where(delta_close < 0, 0)).rolling(window=28).mean()\n    rsi_28 = 100 - (100 / (1 + gain_28 / loss_28))\n    \n    rsi_ratio = rsi_14 / rsi_28\n    \n    ema_5_volume = df['volume'].ewm(span=5, adjust=False).mean()\n    mean_5_close = df['close'].rolling(window=5).mean()\n    \n    heuristics_matrix = rsi_ratio - (ema_5_volume * mean_5_close)\n    \n    return heuristics_matrix",
          "objective": -0.04329,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates the 14-day and 30-day EMAs of the closing price, then finds the slope of the linear regression line fitted to these two EMAs over the past 10 days, and subtracts a term that scales the 21-day EMA of the trading amount by the cube root of the 21-day ATR to account for market volatility.",
          "code": "import pandas as pd\nimport numpy as np\nfrom sklearn.linear_model import LinearRegression\n\ndef heuristics_v2(df):\n    # Calculate 14-day and 30-day EMAs of close prices\n    ema_14_close = df['close'].ewm(span=14, adjust=False).mean()\n    ema_30_close = df['close'].ewm(span=30, adjust=False).mean()\n\n    # Prepare data for calculating the slope of the linear regression\n    x = np.array([ema_14_close.values[-10:], ema_30_close.values[-10:]]).T\n    y = np.arange(10)\n    model = LinearRegression().fit(x, y)\n    slope = model.coef_[0]\n\n    # Calculate 21-day EMA of amount\n    ema_21_amount = df['amount'].ewm(span=21, adjust=False).mean()\n\n    # Calculate 21-day Average True Range\n    tr = df['high'] - df['low']\n    atr = tr.rolling(window=21).mean()\n\n    # Heuristic score calculation\n    heuristics_matrix = pd.Series(slope - (ema_21_amount * atr ** (1/3)), index=df.index)\n\n    return heuristics_matrix",
          "objective": -0.04316,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm computes the alpha factor by combining the 10-day to 20-day RSI ratio of the closing prices with a term that adjusts the 3-day EMA of the volume using the mean of the last 3 days' closing prices.",
          "code": "def heuristics_v2(df):\n    delta_close = df['close'].diff()\n    gain_10 = (delta_close.where(delta_close > 0, 0)).rolling(window=10).mean()\n    loss_10 = (-delta_close.where(delta_close < 0, 0)).rolling(window=10).mean()\n    rsi_10 = 100 - (100 / (1 + gain_10 / loss_10))\n    \n    gain_20 = (delta_close.where(delta_close > 0, 0)).rolling(window=20).mean()\n    loss_20 = (-delta_close.where(delta_close < 0, 0)).rolling(window=20).mean()\n    rsi_20 = 100 - (100 / (1 + gain_20 / loss_20))\n    \n    rsi_ratio = rsi_10 / rsi_20\n    \n    ema_3_volume = df['volume'].ewm(span=3, adjust=False).mean()\n    mean_3_close = df['close'].rolling(window=3).mean()\n    \n    heuristics_matrix = rsi_ratio - (ema_3_volume * mean_3_close)\n    \n    return heuristics_matrix",
          "objective": -0.04308,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates the alpha factor by combining the 10-day to 20-day RSI ratio of the closing prices with a term that adjusts the 3-day EMA of the volume using the mean of the last 5 days' closing prices.",
          "code": "def heuristics_v2(df):\n    delta_close = df['close'].diff()\n    gain_10 = (delta_close.where(delta_close > 0, 0)).rolling(window=10).mean()\n    loss_10 = (-delta_close.where(delta_close < 0, 0)).rolling(window=10).mean()\n    rsi_10 = 100 - (100 / (1 + gain_10 / loss_10))\n    \n    gain_20 = (delta_close.where(delta_close > 0, 0)).rolling(window=20).mean()\n    loss_20 = (-delta_close.where(delta_close < 0, 0)).rolling(window=20).mean()\n    rsi_20 = 100 - (100 / (1 + gain_20 / loss_20))\n    \n    rsi_ratio = rsi_10 / rsi_20\n    \n    ema_3_volume = df['volume'].ewm(span=3, adjust=False).mean()\n    mean_5_close = df['close'].rolling(window=5).mean()\n    \n    heuristics_matrix = rsi_ratio - (ema_3_volume * mean_5_close)\n    \n    return heuristics_matrix",
          "objective": -0.04306,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm computes the ratio of the 20-day and 50-day EMAs of closing prices, then adds a term that scales the 30-day EMA of the trading volume by the standard deviation of the 30-day ATR to reflect long-term price momentum and recent market activity.",
          "code": "def heuristics_v2(df):\n    # Calculate 20-day and 50-day EMAs of close prices\n    ema_20_close = df['close'].ewm(span=20, adjust=False).mean()\n    ema_50_close = df['close'].ewm(span=50, adjust=False).mean()\n\n    # Ratio of 20-day to 50-day EMAs of close prices\n    ratio_ema_close = ema_20_close / ema_50_close\n\n    # Calculate 30-day EMA of volume\n    ema_30_volume = df['volume'].ewm(span=30, adjust=False).mean()\n\n    # Calculate 30-day Average True Range\n    tr = df['high'] - df['low']\n    atr = tr.rolling(window=30).std()\n\n    # Heuristic score calculation\n    heuristics_matrix = ratio_ema_close + (ema_30_volume * atr)\n\n    return heuristics_matrix",
          "objective": -0.04302,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm computes the ratio of the 10-day and 25-day EMAs of closing prices, then subtracts a term that scales the 28-day EMA of the trading volume by the standard deviation of the 28-day ATR, in order to account for both price momentum and market volatility.",
          "code": "def heuristics_v2(df):\n    # Calculate 10-day and 25-day EMAs of close prices\n    ema_10_close = df['close'].ewm(span=10, adjust=False).mean()\n    ema_25_close = df['close'].ewm(span=25, adjust=False).mean()\n\n    # Ratio of 10-day to 25-day EMAs of close prices\n    ratio_ema_close = ema_10_close / ema_25_close\n\n    # Calculate 28-day EMA of volume\n    ema_28_volume = df['volume'].ewm(span=28, adjust=False).mean()\n\n    # Calculate 28-day Average True Range\n    tr = df['high'] - df['low']\n    atr = tr.rolling(window=28).std()\n\n    # Heuristic score calculation\n    heuristics_matrix = ratio_ema_close - (ema_28_volume * atr)\n\n    return heuristics_matrix",
          "objective": -0.04289,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm computes the alpha factor by subtracting the 50-day EMA of the closing price from the 100-day EMA, then adding a term that scales the 30-day EMA of the volume by the average true range (ATR) over 30 days, to capture market dynamics and volatility.",
          "code": "def heuristics_v2(df):\n    # Calculate 50-day and 100-day EMAs of close prices\n    ema_50_close = df['close'].ewm(span=50, adjust=False).mean()\n    ema_100_close = df['close'].ewm(span=100, adjust=False).mean()\n\n    # Difference between EMAs of close prices\n    diff_ema_close = ema_100_close - ema_50_close\n\n    # Calculate 30-day EMA of volume\n    ema_30_volume = df['volume'].ewm(span=30, adjust=False).mean()\n\n    # Calculate 30-day Average True Range\n    tr = df['high'] - df['low']\n    atr = tr.rolling(window=30).mean()\n\n    # Heuristic score calculation\n    heuristics_matrix = diff_ema_close + (ema_30_volume * atr)\n\n    return heuristics_matrix",
          "objective": -0.04183,
          "other_inf": null
     }
]