def heuristics_v2(df):
    # Calculate 5-day and 20-day ATR
    df['tr'] = df[['high', 'low', 'close']].apply(lambda x: max(x[0], x[1]) - min(x[1], x[2]), axis=1)
    df['atr5'] = df['tr'].rolling(window=5).mean()
    df['atr20'] = df['tr'].rolling(window=20).mean()
    
    # Compute the volatility-adjusted return factor
    df['vol_adjusted_factor'] = ((df['atr5'] - df['atr20']) / df['atr20']) * (df['close'] / df['close'].shift(10) - 1)
    
    # Apply an Exponential Moving Average (EMA) for smoothing
    df['smoothed_vol_adjusted'] = df['vol_adjusted_factor'].ewm(span=5, adjust=False).mean()
    
    # Prepare the output
    heuristics_matrix = df['smoothed_vol_adjusted']
    
    return heuristics_matrix
