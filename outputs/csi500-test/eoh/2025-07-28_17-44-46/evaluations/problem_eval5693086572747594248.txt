import pandas as pd

def heuristics_v2(df):
    # Calculate True Range
    tr = pd.DataFrame({'hl': df['high'] - df['low'], 'hc': abs(df['high'] - df['close'].shift(1)), 'lc': abs(df['low'] - df['close'].shift(1))})
    tr['tr'] = tr.max(axis=1)
    
    # Calculate Average True Range (ATR) over the last 20 days
    atr = tr['tr'].rolling(window=20).mean()
    
    # Calculate the 10-day moving average of the high price
    ma_high = df['high'].rolling(window=10).mean()
    
    # Generate the new factor by dividing ATR by the Moving Average of the High Price
    heuristics_matrix = atr / ma_high
    
    return heuristics_matrix
