def heuristics_v2(df):
    # Calculate the 20-day moving average of the highest and lowest prices
    df['high_low_ma'] = (df['high'].rolling(window=20).mean() + df['low'].rolling(window=20).mean()) / 2
    
    # Calculate the ratio of the close price to the high-low moving average
    df['price_to_high_low_ma_ratio'] = df['close'] / df['high_low_ma']
    
    # Calculate the 20-day moving average of the trading amount
    df['amount_ma_20d'] = df['amount'].rolling(window=20).mean()
    
    # Calculate the percentage change in the trading amount relative to its 20-day moving average
    df['amount_change_to_ma'] = df['amount'] / df['amount_ma_20d']
    
    # Composite heuristic score: sum of the price-to-high-low-ma ratio and the amount change to ma
    heuristics_matrix = df['price_to_high_low_ma_ratio'] + df['amount_change_to_ma']
    
    return heuristics_matrix
