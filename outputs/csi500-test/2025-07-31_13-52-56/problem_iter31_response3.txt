```python
import pandas as pd

def heuristics_v2(df):
    # Calculate the difference between today's close and yesterday's close
    df['close_diff'] = df['close'].diff()
    
    # Calculate the average of the last 5 days' close prices
    df['5_day_avg_close'] = df['close'].rolling(window=5).mean()
    
    # Determine the trend by comparing today's close with the 5-day moving average
    df['trend'] = df['close'] > df['5_day_avg_close']
    
    # Compute the daily range (high - low)
    df['daily_range'] = df['high'] - df['low']
    
    # Calculate the average daily range over the last 20 days
    df['20_day_avg_range'] = df['daily_range'].rolling(window=20).mean()
    
    # Identify if today's range is above or below the 20-day average
    df['range_above_avg'] = df['daily_range'] > df['20_day_avg_range']
    
    # Measure the percentage change in volume from the previous day
    df['volume_change'] = df['volume'].pct_change()
    
    # Check if today's volume is higher or lower than the 10-day moving average
    df['10_day_avg_volume'] = df['volume'].rolling(window=10).mean()
    df['volume_above_avg'] = df['volume'] > df['10_day_avg_volume']
    
    # Calculate the difference between today's open and close
    df['open_close_diff'] = df['close'] - df['open']
    
    # Determine if today's close is higher or lower than today's open
    df['close_higher_open'] = df['close'] > df['open']
    
    # Identify bullish or bearish engulfing patterns
    df['bullish_engulfing'] = (df['close'] > df['open']) & (df['close'].shift(1) < df['open'].shift(1)) & (df['close'] > df['open'].shift(1)) & (df['open'] < df['close'].shift(1))
    df['bearish_engulfing'] = (df['close'] < df['open']) & (df['close'].shift(1) > df['open'].shift(1)) & (df['close'] < df['open'].shift(1)) & (df['open'] > df['close'].shift(1))
    
    # Recognize doji patterns
    df['doji'] = (df['close'] - df['open']).abs() < (df['high'] - df['low']) * 0.05
    
    # Detect hammer or hanging man patterns
    df['hammer_hanging_man'] = (df['close'] - df['low']) > 2 * (df['high'] - df['close']) & (df['close'] - df['low']) > 2 * (df['open'] - df['low'])
    
    # Calculate the correlation between daily returns and volume changes
    df['return'] = df['close'].pct_change()
    df['volume_change'] = df['volume'].pct_change()
    df['correlation_vol_return'] = df['return'].rolling(window=10).corr(df['volume_change'])
    
    # Calculate the ratio of today's close to today's high
    df['close_to_high_ratio'] = df['close'] / df['high']
    
    # Calculate the ratio of today's close to today's low
    df['close_to_low_ratio'] = df['close'] / df['low']
    
    # Compare these ratios to the 10-day average
    df['10_day_avg_close_to_high_ratio'] = df['close_to_high_ratio'].rolling(window=10).mean()
    df['10_day_avg_close_to_low_ratio'] = df['close_to_low_ratio'].rolling(window=10).mean()
    
    df['close_to_high_above_avg'] = df['close_to_high_ratio'] > df['10_day_avg_close_to_high_ratio']
    df['close_to_low_above_avg'] = df['close_to_low_ratio'] > df['10_day_avg_close_to_low_ratio']
    
    # Calculate the total volume traded over the past 30 days
    df['30_day_cumulative_volume'] = df['volume'].rolling(window=30).sum()
    
    # Compare today's volume to the 30-day cumulative volume
    df['volume_vs_30_day_cumulative'] = df['volume'] / df['30_day_cumulative_volume']
    
    # Combine all factors into a single alpha factor
    alpha_factor = (
        df['close_diff'] + 
        df['trend'].astype(int)
