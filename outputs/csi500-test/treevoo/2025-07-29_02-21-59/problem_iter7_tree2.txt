```txt
Intraday Momentum and Volume Shock Factor
├── Calculate Intraday High-Low Movement
│   ├── Use High price
│   └── Use Low price
├── Calculate Intraday Return
│   ├── Use Open price
│   └── Use Close price
├── Weight by Volume Change
│   ├── Calculate Volume Change
│   │   ├── Use Current Volume
│   │   └── Use Previous Day's Volume
│   └── Multiply Intraday Return by Volume Change
└── Logarithmic Returns with Volume Shock
    ├── Calculate Logarithmic Returns
    │   ├── Use Close price
    │   └── Compute log(close_t / close_(t-1))
    ├── Smoothing Logarithmic Returns
    │   ├── Apply Simple Moving Average (SMA)
    │   │   ├── Input: Logarithmic Returns
    │   │   └── Window Length: 5 days
    │   └── Store Smoothed Returns
    ├── Volume Shock Indicator
    │   ├── Calculate Daily Volume Change
    │   │   ├── Use Volume
    │   │   └── Compute volume_t - volume_(t-1)
    │   ├── Identify Large Changes
    │   │   ├── If |volume_change| > 2 * standard deviation of 5-day window
    │   │   │   └── Assign 1 (Shock), else 0 (No Shock)
    └── Combine Intraday Weighted Return and Shock Adjusted Return
        ├── When Shock = 1, Keep the smoothed return
        ├── When Shock = 0, Set to 0
        └── Add to the Intraday Weighted Return
```
