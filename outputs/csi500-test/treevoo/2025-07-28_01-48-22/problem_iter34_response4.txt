```python
import pandas as pd

def heuristics_v2(df):
    # Calculate the 5-day weighted moving average (WMA) of closing prices
    weights = [0.1, 0.2, 0.3, 0.2, 0.1]
    df['WMA_5'] = (df['close'].rolling(window=5).apply(lambda x: (x * weights).sum(), raw=True)).shift(1)
    
    # Compare today's close price to the 5-day WMA to generate a signal
    df['signal_WMA'] = df.apply(lambda row: 1 if row['close'] > row['WMA_5'] else -1, axis=1)

    # Calculate the percentage change in the closing price from 10 and 20 days ago to today
    df['pct_change_10'] = df['close'].pct_change(periods=10)
    df['pct_change_20'] = df['close'].pct_change(periods=20)
    
    # Combine the percentage changes
    df['combined_momentum'] = df['pct_change_10'] + df['pct_change_20']

    # Compute the difference between the daily close and open prices
    df['close_open_diff'] = df['close'] - df['open']
    
    # Create a cumulative sum of these differences over the past 20 trading days
    df['cumulative_sum_20'] = df['close_open_diff'].rolling(window=20).sum()
    
    # Introduce a smoothing factor to the cumulative sum
    df['smoothed_cumulative_sum'] = df['cumulative_sum_20'].ewm(span=10, adjust=False).mean()

    # Calculate the 20-day average trading volume
    df['avg_vol_20'] = df['volume'].rolling(window=20).mean()
    
    # Flag days with volume significantly above the average
    df['vol_anomaly'] = df.apply(lambda row: 1 if row['volume'] > (row['avg_vol_20'] + 3 * row['volume'].rolling(window=20).std()) else 0, axis=1)

    # Combine the volume anomaly with the sign of the day's return and the direction of the 5-day WMA
    df['combined_signal'] = df.apply(lambda row: row['signal_WMA'] * (1 if row['close'] > row['open'] else -1) * row['vol_anomaly'], axis=1)

    # Calculate the daily range
    df['range'] = df['high'] - df['low']
    
    # Compute the 10-day moving average of the ranges
    df['avg_range_10'] = df['range'].rolling(window=10).mean()
    
    # Divide the current day's range by its 10-day moving average
    df['relative_volatility'] = df['range'] / df['avg_range_10']

    # Combine all the signals into a final alpha factor
    df['alpha_factor'] = (
        df['signal_WMA'] +
        df['combined_momentum'] +
        df['smoothed_cumulative_sum'] +
        df['combined_signal'] +
        df['relative_volatility']
    )

    # Return the alpha factor as a pandas Series
    return df['alpha_factor']
```
