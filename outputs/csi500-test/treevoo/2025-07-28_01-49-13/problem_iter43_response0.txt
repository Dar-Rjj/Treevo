```python
import pandas as pd

def heuristics_v2(df):
    # Calculate the difference between today's closing price and the average of the previous 5 days' closing prices
    df['5_day_avg_close'] = df['close'].rolling(window=5).mean()
    df['momentum'] = df['close'] - df['5_day_avg_close']
    
    # Adjust for volatility by dividing the above difference by the standard deviation of the past 5 days' closing prices
    df['volatility'] = df['close'].rolling(window=5).std()
    df['adjusted_momentum'] = df['momentum'] / df['volatility']
    
    # Incorporate trading volume by computing the ratio of todayâ€™s volume to the average volume over the past 5 days
    df['5_day_avg_volume'] = df['volume'].rolling(window=5).mean()
    df['volume_ratio'] = df['volume'] / df['5_day_avg_volume']
    df['vol_adjusted_momentum'] = df['adjusted_momentum'] * df['volume_ratio']

    # Short-term (2 days) price change
    df['short_term_momentum'] = df['close'] - df['close'].shift(2)

    # Medium-term (10 days) price change
    df['medium_term_momentum'] = df['close'] - df['close'].shift(10)

    # Long-term (30 days) price change
    df['long_term_momentum'] = df['close'] - df['close'].shift(30)

    # 7-day SMA minus 25-day SMA
    df['sma_7'] = df['close'].rolling(window=7).mean()
    df['sma_25'] = df['close'].rolling(window=25).mean()
    df['sma_crossover_7_25'] = df['sma_7'] - df['sma_25']

    # 25-day SMA minus 60-day SMA
    df['sma_60'] = df['close'].rolling(window=60).mean()
    df['sma_crossover_25_60'] = df['sma_25'] - df['sma_60']

    # Standard deviation of daily log returns over 30 days
    df['log_returns'] = (df['close'] / df['close'].shift(1)).apply(np.log)
    df['volatility_30'] = df['log_returns'].rolling(window=30).std()

    # Average true range (ATR) over 21 days
    df['true_range'] = df[['high', 'low']].diff(axis=1).abs().max(axis=1)
    df['atr_21'] = df['true_range'].rolling(window=21).mean()

    # Ratio of today's high-low range to the average high-low range over 30 days
    df['avg_high_low_range_30'] = df['high'] - df['low']
    df['avg_high_low_range_30'] = df['avg_high_low_range_30'].rolling(window=30).mean()
    df['range_ratio_30'] = (df['high'] - df['low']) / df['avg_high_low_range_30']

    # On-balance volume (OBV)
    df['obv'] = (df['close'] > df['close'].shift(1)).astype(int) * df['volume'] - (df['close'] < df['close'].shift(1)).astype(int) * df['volume']
    df['obv'] = df['obv'].cumsum()

    # Volume rate of change (VROC) over different periods
    df['vroc_2'] = (df['volume'] - df['volume'].shift(2)) / df['volume'].shift(2)
    df['vroc_21'] = (df['volume'] - df['volume'].shift(21)) / df['volume'].shift(21)
    df['vroc_50'] = (df['volume'] - df['volume'].shift(50)) / df['volume'].shift(50)

    # Bullish engulfing pattern
    df['bullish_engulfing'] = ((df['open'] < df['close'].shift(1)) & (df['close'] > df['open'].shift(1))).astype(int)

    # Bearish engulfing pattern
    df['bearish_engulfing'] = ((df['open'] > df['close'].shift(1)) & (df['close'] < df['open'].shift(1))).astype(int)

    # Doji pattern
    df['doji'] = ((df['close'] - df
