```python
import pandas as pd
import numpy as np

def heuristics_v2(df):
    # Calculate price-based indicators
    df['SMA_20'] = df['close'].rolling(window=20).mean()
    df['EMA_10'] = df['close'].ewm(span=10, adjust=False).mean()
    df['Daily_Price_Change'] = df['close'] - df['close'].shift(1)
    df['High_Low_Spread'] = df['high'] - df['low']
    df['Close_Open_Ratio'] = df['close'] / df['open']
    df['Close_Prev_Close_Ratio'] = df['close'] / df['close'].shift(1)
    
    # Calculate volume-based indicators
    df['Volume_Change'] = df['volume'] - df['volume'].shift(1)
    df['Volume_Weighted_Close'] = (df['close'] * df['volume']).rolling(window=10).sum() / df['volume'].rolling(window=10).sum()
    
    # Combine price and volume indicators
    df['PVT'] = (df['close'] - df['close'].shift(1)) * df['volume']
    df['PVT'] = df['PVT'].cumsum()
    
    df['OBV'] = 0
    df.loc[df['close'] > df['close'].shift(1), 'OBV'] = df['volume']
    df.loc[df['close'] < df['close'].shift(1), 'OBV'] = -df['volume']
    df['OBV'] = df['OBV'].cumsum()
    
    # Generate pattern-based indicators
    df['Three_Day_Price_Pattern'] = (df['close'] - df['open']) + (df['close'].shift(1) - df['open'].shift(1)) + (df['close'].shift(2) - df['open'].shift(2))
    df['Inside_Bar'] = (df['high'] < df['high'].shift(1)) & (df['low'] > df['low'].shift(1))
    
    # Incorporate additional price and volume relationships
    df['ADL'] = ((df['close'] - df['low']) - (df['high'] - df['close'])) / (df['high'] - df['low']) * df['volume']
    df['ADL'] = df['ADL'].cumsum()
    
    df['ADL_EMA_3'] = df['ADL'].ewm(span=3, adjust=False).mean()
    df['ADL_EMA_10'] = df['ADL'].ewm(span=10, adjust=False).mean()
    df['Chaikin_Oscillator'] = df['ADL_EMA_3'] - df['ADL_EMA_10']
    
    # Enhance with more complex patterns
    df['Bullish_Engulfing'] = (df['close'] > df['open']) & (df['close'].shift(1) < df['open'].shift(1)) & (df['close'] > df['open'].shift(1)) & (df['open'] < df['close'].shift(1))
    df['Bearish_Engulfing'] = (df['close'] < df['open']) & (df['close'].shift(1) > df['open'].shift(1)) & (df['close'] < df['open'].shift(1)) & (df['open'] > df['close'].shift(1))
    
    # Evaluate momentum and volatility
    delta = df['close'].diff()
    gain = delta.where(delta > 0, 0)
    loss = -delta.where(delta < 0, 0)
    avg_gain = gain.rolling(window=14).mean()
    avg_loss = loss.rolling(window=14).mean()
    rs = avg_gain / avg_loss
    df['RSI'] = 100 - (100 / (1 + rs))
    
    df['BB_Middle'] = df['SMA_20']
    df['BB_Upper'] = df['BB_Middle'] + 2 * df['close'].rolling(window=20).std()
    df['BB_Lower'] = df['BB_Middle'] - 2 * df['close'].rolling(window=20).std()
    
    # Integrate trading signals
    df['Buy_Signal'] = (df['RSI'] < 30) & (df['close'] > df['SMA_20'])
    df['Sell_Signal'] = (df['RSI'] > 70) & (df['close'] < df['SMA_20'])
    
   
