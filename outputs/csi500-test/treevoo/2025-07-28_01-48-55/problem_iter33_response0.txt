```python
import pandas as pd
import numpy as np

def heuristics_v2(df):
    # Calculate moving averages over different time windows
    df['MA_5'] = df['close'].rolling(window=5).mean()
    df['MA_10'] = df['close'].rolling(window=10).mean()
    df['MA_20'] = df['close'].rolling(window=20).mean()
    df['MA_30'] = df['close'].rolling(window=30).mean()

    # Evaluate the slope of MA lines
    for window in [5, 10, 20, 30]:
        ma_col = f'MA_{window}'
        ma_slope = (df[ma_col] - df[ma_col].shift(1)) / window
        df[f'MA_slope_{window}'] = ma_slope
        
    # Develop a price momentum indicator
    for n in [5, 10, 20, 50]:
        df[f'price_momentum_{n}'] = df['close'] - df['close'].shift(n)
        
    # Measure volatility using standard deviation of log returns
    for n in [10, 20, 30]:
        log_returns = np.log(df['close'] / df['close'].shift(1))
        df[f'volatility_{n}'] = log_returns.rolling(window=n).std()
        
    # Create an RSI-based factor with custom thresholds
    def rsi(series, period=14):
        delta = series.diff()
        gain = (delta.where(delta > 0, 0)).fillna(0)
        loss = (-delta.where(delta < 0, 0)).fillna(0)

        avg_gain = gain.rolling(window=period).mean()
        avg_loss = loss.rolling(window=period).mean()

        rs = avg_gain / avg_loss
        rsi = 100 - (100 / (1 + rs))
        return rsi

    df['RSI'] = rsi(df['close'], period=14)
    
    # Formulate a volume-to-price correlation factor
    for n in [5, 10, 20]:
        df[f'volume_price_corr_{n}'] = df['volume'].rolling(window=n).corr(df['close'])
        
    # Construct a factor that combines price action and candlestick characteristics
    def is_doji(open, high, low, close):
        body = abs(close - open) / (high - low)
        return body < 0.1  # A small body is considered a doji

    def is_hammer(open, high, low, close):
        body = abs(close - open)
        lower_shadow = min(close, open) - low
        if lower_shadow > 2 * body and (high - max(close, open)) < 0.5 * body:
            return True
        return False

    df['doji_pattern'] = df.apply(lambda x: is_doji(x['open'], x['high'], x['low'], x['close']), axis=1)
    df['hammer_pattern'] = df.apply(lambda x: is_hammer(x['open'], x['high'], x['low'], x['close']), axis=1)

    # Investigate the influence of gap openings
    df['gap_size'] = df['open'] - df['close'].shift(1)
    df['gap_direction'] = np.sign(df['gap_size'])

    # Combine all factors into a single alpha factor
    alpha_factor = (
        0.2 * df['MA_slope_5'] +
        0.2 * df['price_momentum_10'] +
        0.1 * df['volatility_20'] +
        0.1 * (df['RSI'] - 50) +
        0.2 * df['volume_price_corr_10'] +
        0.1 * df['doji_pattern'] +
        0.1 * df['hammer_pattern'] +
        0.1 * df['gap_direction']
    )

    return alpha_factor
```
