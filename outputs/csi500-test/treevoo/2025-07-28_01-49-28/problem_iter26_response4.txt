```python
import pandas as pd

def heuristics_v2(df):
    # Momentum indicators
    df['SMA_10'] = df['close'].rolling(window=10).mean()
    df['SMA_50'] = df['close'].rolling(window=50).mean()
    df['Price_Momentum_20'] = df['close'].pct_change(periods=20)
    df['SMA_Diff'] = df['SMA_10'] - df['SMA_50']
    
    # Volatility measures
    df['Log_Return'] = (df['close'] / df['close'].shift(1)).apply(lambda x: np.log(x))
    df['Volatility_30'] = df['Log_Return'].rolling(window=30).std()
    df['HL_Range'] = df['high'] - df['low']
    df['HL_Range_MA_20'] = df['HL_Range'].rolling(window=20).mean()
    df['ATR_14'] = df['HL_Range'].rolling(window=14).mean()  # Simplified ATR calculation
    
    # Volume analysis
    df['Vol_MA_20'] = df['volume'].rolling(window=20).mean()
    df['Volume_Ratio'] = df['volume'] / df['Vol_MA_20']
    df['OBV'] = (df['close'] > df['close'].shift(1)).cumsum() * df['volume'].fillna(0)
    
    # OHLC bar information
    df['Price_Range'] = df['high'] - df['low']
    df['Open_Close_Relation'] = (df['close'] - df['open']) / df['open']
    # Doji and hammer patterns
    doji_condition = (df['high'] - df['low']) < 0.005 * (df['close'] + df['open'])/2
    hammer_condition = (df['close'] - df['low']) > 2 * (df['high'] - df['close'])
    df['Doji_Pattern'] = doji_condition.astype(int)
    df['Hammer_Pattern'] = hammer_condition.astype(int)
    
    # Composite alpha factors
    df['Composite_1'] = df['Price_Momentum_20'] * df['Volume_Ratio']
    df['Composite_2'] = (df['SMA_10'] - df['SMA_50']) / df['ATR_14']
    
    # Final alpha factor
    df['Alpha_Factor'] = df[['Composite_1', 'Composite_2']].mean(axis=1)
    
    return df['Alpha_Factor']
```
