```python
import pandas as pd

def heuristics_v2(df):
    # Calculate daily return
    df['daily_return'] = (df['close'] - df['close'].shift(1)) / df['close'].shift(1)
    
    # Momentum over 5-day window
    df['momentum_5d'] = df['daily_return'].rolling(window=5).mean()
    
    # Reversal signal
    df['reversal_signal'] = df['daily_return'] - df['momentum_5d'].shift(1)
    
    # Gap up/down ratio
    df['gap_ratio'] = (df['open'] - df['close'].shift(1)) / df['close'].shift(1)
    
    # Trend of gap over past 10 days
    df['gap_trend_10d'] = df['gap_ratio'].rolling(window=10).mean()
    
    # Intraday momentum
    df['intraday_momentum'] = (df['close'] - df['open']) / df['open']
    
    # 10-day moving average of intraday momentum
    df['intraday_momentum_10d'] = df['intraday_momentum'].rolling(window=10).mean()
    
    # True range
    high_low = df['high'] - df['low']
    high_close_prev = (df['high'] - df['close'].shift(1)).abs()
    low_close_prev = (df['low'] - df['close'].shift(1)).abs()
    df['true_range'] = pd.concat([high_low, high_close_prev, low_close_prev], axis=1).max(axis=1)
    
    # Volatility over 20 days
    df['volatility_20d'] = df['true_range'].rolling(window=20).mean()
    
    # Volume change
    df['volume_change'] = (df['volume'] - df['volume'].shift(1)) / df['volume'].shift(1)
    
    # Volume-price relationship
    df['volume_price_relation'] = df['daily_return'] * df['volume_change']
    
    # 5-day moving average of volume-price relationship
    df['volume_price_relation_5d'] = df['volume_price_relation'].rolling(window=5).mean()
    
    # Money flow
    df['money_flow'] = (df['close'] - df['close'].shift(1)) * df['amount']
    
    # 30-day sum of money flow
    df['money_flow_30d_sum'] = df['money_flow'].rolling(window=30).sum()
    
    # Alpha factor combining all the above signals
    alpha_factor = (
        0.2 * df['momentum_5d'] + 
        0.2 * df['reversal_signal'] + 
        0.1 * df['gap_trend_10d'] + 
        0.1 * df['intraday_momentum_10d'] + 
        0.1 * df['volatility_20d'] + 
        0.1 * df['volume_price_relation_5d'] + 
        0.2 * df['money_flow_30d_sum']
    )
    
    return alpha_factor
```
