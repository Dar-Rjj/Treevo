```python
import pandas as pd

def heuristics_v2(df):
    # Short-Term Simple Moving Average (5-day SMA)
    df['SMA_5'] = df['close'].rolling(window=5).mean()
    
    # Long-Term Simple Moving Average (20-day SMA)
    df['SMA_20'] = df['close'].rolling(window=20).mean()
    
    # Difference Between Short-Term and Long-Term SMA
    df['SMA_diff'] = df['SMA_5'] - df['SMA_20']
    
    # Average Volume Over the Last 5 Days
    df['avg_vol_5'] = df['volume'].rolling(window=5).mean()
    
    # Current Day's Volume to Average Volume Ratio
    df['vol_ratio'] = df['volume'] / df['avg_vol_5']
    
    # Number of Consecutive Days with Higher Highs
    df['higher_highs'] = (df['high'] > df['high'].shift(1)).astype(int)
    df['consecutive_highs'] = df['higher_highs'].groupby((df['higher_highs'] != df['higher_highs'].shift()).cumsum()).cumsum()
    
    # Number of Consecutive Days with Lower Lows
    df['lower_lows'] = (df['low'] < df['low'].shift(1)).astype(int)
    df['consecutive_lows'] = df['lower_lows'].groupby((df['lower_lows'] != df['lower_lows'].shift()).cumsum()).cumsum()
    
    # Daily Price Range
    df['price_range'] = df['high'] - df['low']
    
    # Composite Factor from SMA Difference and Volume Ratio
    df['composite_factor'] = 0.5 * df['SMA_diff'] + 0.5 * df['vol_ratio']
    
    # RSI (Relative Strength Index) with a 14-Day Window
    delta = df['close'].diff()
    gain = (delta.where(delta > 0, 0)).rolling(window=14).mean()
    loss = (-delta.where(delta < 0, 0)).rolling(window=14).mean()
    rs = gain / loss
    df['RSI'] = 100 - (100 / (1 + rs))
    
    # Indicator for Overbought (RSI > 70) and Oversold (RSI < 30)
    df['overbought'] = (df['RSI'] > 70).astype(int)
    df['oversold'] = (df['RSI'] < 30).astype(int)
    
    # Volume-Weighted Average Price (VWAP)
    df['cumulative_price_volume'] = (df['close'] * df['volume']).cumsum()
    df['cumulative_volume'] = df['volume'].cumsum()
    df['VWAP'] = df['cumulative_price_volume'] / df['cumulative_volume']
    
    # Indicator When Closing Price is Above/Below VWAP
    df['close_above_VWAP'] = (df['close'] > df['VWAP']).astype(int)
    
    # Gap Between the Previous Close and Current Open
    df['gap'] = df['open'] - df['close'].shift(1)
    
    # Frequency of Gap Openings
    df['significant_gap'] = (df['gap'].abs() > 0.01 * df['close']).astype(int)
    
    # Ratio of Open to Close
    df['open_close_ratio'] = df['open'] / df['close']
    
    # On-Balance Volume (OBV)
    df['OBV'] = (df['close'] - df['close'].shift(1)).apply(lambda x: 1 if x > 0 else -1 if x < 0 else 0).cumsum() * df['volume']
    
    # Trend of OBV
    df['OBV_trend'] = df['OBV'].diff().apply(lambda x: 1 if x > 0 else -1 if x < 0 else 0)
    
    # Final Alpha Factor
    df['alpha_factor'] = 0.3 * df['composite_factor'] + 0.3 * df['RSI'] + 0.2 * df['close_above_VWAP'] + 0.2 * df['OBV_trend']
    
    return df['alpha_factor']
```
