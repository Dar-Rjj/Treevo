```python
import pandas as pd

def heuristics_v2(df):
    # Calculate price change momentum
    df['momentum_1d'] = df['close'].diff(1)
    df['momentum_5d'] = df['close'].diff(5)
    df['momentum_20d'] = df['close'].diff(20)

    # Measure volatility
    df['return'] = df['close'].pct_change()
    df['volatility_5d'] = df['return'].rolling(window=5).std()
    df['volatility_10d'] = df['return'].rolling(window=10).std()
    df['volatility_20d'] = df['return'].rolling(window=20).std()

    # Explore trading volume trends
    df['volume_change_1d'] = df['volume'].pct_change(1)
    df['volume_change_5d'] = df['volume'].pct_change(5)
    df['volume_change_20d'] = df['volume'].pct_change(20)

    # Identify breakout patterns
    df['high_5d_breakout'] = (df['high'] > df['high'].rolling(window=5).max()).astype(int)
    df['high_10d_breakout'] = (df['high'] > df['high'].rolling(window=10).max()).astype(int)
    df['high_20d_breakout'] = (df['high'] > df['high'].rolling(window=20).max()).astype(int)
    df['low_5d_breakdown'] = (df['low'] < df['low'].rolling(window=5).min()).astype(int)
    df['low_10d_breakdown'] = (df['low'] < df['low'].rolling(window=10).min()).astype(int)
    df['low_20d_breakdown'] = (df['low'] < df['low'].rolling(window=20).min()).astype(int)

    # Analyze price-to-volume relationships
    df['price_change'] = df['close'].diff(1).abs()
    df['price_vol_ratio'] = df['price_change'] / df['volume']

    # Evaluate market sentiment from candlestick patterns
    df['candle_sentiment'] = (df['close'] > df['open']).astype(int) - (df['close'] < df['open']).astype(int)

    # Assess liquidity
    df['avg_volume_20d'] = df['volume'].rolling(window=20).mean()

    # Consider price gaps
    df['prev_close'] = df['close'].shift(1)
    df['gap'] = ((df['open'] > df['prev_close']).astype(int) - (df['open'] < df['prev_close']).astype(int))

    # Combine all factors into a single DataFrame
    alpha_factors = df[['momentum_1d', 'momentum_5d', 'momentum_20d',
                        'volatility_5d', 'volatility_10d', 'volatility_20d',
                        'volume_change_1d', 'volume_change_5d', 'volume_change_20d',
                        'high_5d_breakout', 'high_10d_breakout', 'high_20d_breakout',
                        'low_5d_breakdown', 'low_10d_breakdown', 'low_20d_breakdown',
                        'price_vol_ratio', 'candle_sentiment', 'avg_volume_20d', 'gap']].copy()

    return alpha_factors
```
