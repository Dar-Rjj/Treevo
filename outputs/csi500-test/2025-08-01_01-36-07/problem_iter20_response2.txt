```python
import pandas as pd

def heuristics_v2(df):
    # Calculate the body and tail of the candle
    df['body'] = df['close'] - df['open']
    df['tail_high'] = df['high'] - df['close'] if df['close'] > df['open'] else df['high'] - df['open']
    df['tail_low'] = df['open'] - df['low'] if df['close'] > df['open'] else df['close'] - df['low']
    
    # Determine if the candle is bullish or bearish
    df['is_bullish'] = df['close'] > df['open']
    df['is_bearish'] = df['close'] < df['open']
    
    # Calculate the size of the candle's body relative to the total range
    df['body_proportion'] = abs(df['body']) / (df['high'] - df['low'])
    
    # Calculate volume-weighted price
    df['vwp'] = (df['high'] + df['low'] + df['close']) / 3 * df['volume']

    # Calculate average volume over the past 20 days
    df['avg_vol_20d'] = df['volume'].rolling(window=20).mean()
    
    # Calculate the alpha factor: combination of different components
    df['alpha_factor'] = (
        0.4 * (df['body_proportion'] - df['body_proportion'].shift(1)) +  # Change in body proportion
        0.3 * (df['vwp'] - df['vwp'].shift(1)) / df['avg_vol_20d'] +      # Momentum of volume-weighted price
        0.2 * (df['is_bullish'] - df['is_bearish']) * df['body_proportion']  # Strength of trend
    )
    
    # Return the alpha factor as a pandas Series
    return df['alpha_factor']
```
