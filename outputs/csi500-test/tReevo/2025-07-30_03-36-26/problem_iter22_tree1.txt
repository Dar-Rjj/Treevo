```txt
Volume-Weighted Average Price (VWAP) Enhanced Alpha Factor with Adaptive Weights, Market Regime Adjustment, and Risk-Adjusted Return
├── Calculate Daily VWAP
│   ├── Calculate Total Volume
│   │   └── Sum of Day's Volumes
│   ├── Calculate Total Dollar Value
│   │   └── Sum of (Volume * Close Price)
│   └── Divide Total Dollar Value by Total Volume
├── Calculate VWAP Deviation
│   ├── Use VWAP
│   ├── Use Close Price
│   └── Subtract VWAP from Close Price
├── Calculate Cumulative VWAP Deviation
│   ├── Use VWAP Deviation
│   ├── Use Previous Day's Cumulative VWAP Deviation
│   └── Add VWAP Deviation to Previous Day's Cumulative VWAP Deviation
├── Integrate Short-Term Weighted Momentum
│   ├── Choose Short-Term Momentum Period (e.g., 5 days)
│   ├── Calculate Momentum for the chosen period
│   │   └── Sum of (VWAP Deviations * Weights) over the period
│   ├── Determine Adaptive Weights
│   │   ├── Calculate Recent Market Volatility
│   │   │   └── Standard Deviation of Returns over a recent period (e.g., 10 days)
│   │   ├── High Volatility: Increase Weights for shorter periods
│   │   └── Low Volatility: Increase Weights for longer periods
│   └── Combine with Cumulative VWAP Deviation
│       └── Add Short-Term Weighted Momentum to Cumulative VWAP Deviation
├── Integrate Medium-Term Weighted Momentum
│   ├── Choose Medium-Term Momentum Period (e.g., 10 days)
│   ├── Calculate Momentum for the chosen period
│   │   └── Sum of (VWAP Deviations * Weights) over the period
│   ├── Determine Adaptive Weights
│   │   ├── Calculate Recent Market Volatility
│   │   │   └── Standard Deviation of Returns over a recent period (e.g., 20 days)
│   │   ├── High Volatility: Increase Weights for shorter periods
│   │   └── Low Volatility: Increase Weights for longer periods
│   └── Combine with Cumulative VWAP Deviation
│       └── Add Medium-Term Weighted Momentum to Cumulative VWAP Deviation
├── Integrate Long-Term Weighted Momentum
│   ├── Choose Long-Term Momentum Period (e.g., 20 days)
│   ├── Calculate Momentum for the chosen period
│   │   └── Sum of (VWAP Deviations * Weights) over the period
│   ├── Determine Adaptive Weights
│   │   ├── Calculate Recent Market Volatility
│   │   │   └── Standard Deviation of Returns over a recent period (e.g., 30 days)
│   │   ├── High Volatility: Increase Weights for shorter periods
│   │   └── Low Volatility: Increase Weights for longer periods
│   └── Combine with Cumulative VWAP Deviation
│       └── Add Long-Term Weighted Momentum to Cumulative VWAP Deviation
├── Calculate Intraday Volatility
│   ├── Calculate High-Low Range
│   │   └── High Price - Low Price
│   ├── Calculate Absolute VWAP Deviation
│   │   └── Absolute Value of (Close Price - VWAP)
│   └── Combine High-Low Range and Absolute VWAP Deviation
│       └── Sum of High-Low Range and Absolute VWAP Deviation
├── Adjust for Market Regime
│   ├── Identify Market Regime
│   │   ├── Calculate Market Trend (e.g., Moving Average Crossover)
│   │   └── Identify Bull or Bear Market
│   ├── Adjust Weights Based on Market Regime
│   │   ├── Bull Market: Increase Weights for Momentum Factors
│   │   └── Bear Market: Decrease Weights for Momentum Factors
└── Final Alpha Factor
    ├── Combine Cumulative VWAP Deviation
    ├── Incorporate Short-Term Weighted Momentum
    ├── Incorporate Medium-Term Weighted Momentum
    ├── Incorporate Long-Term Weighted Momentum
    ├── Incorporate Intraday Volatility
    │   └── Add Intraday Volatility to the combined factor
    └── Incorporate Market Regime Adjustment
        └── Apply Adjusted Weights to the Combined Factor
```
```
