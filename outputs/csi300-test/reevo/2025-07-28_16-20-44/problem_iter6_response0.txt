```python
def heuristics_v2(df: pd.DataFrame) -> pd.Series:
    # Calculate moving averages over different periods for close price
    ma_5 = df['close'].rolling(window=5).mean()
    ma_10 = df['close'].rolling(window=10).mean()
    ma_20 = df['close'].rolling(window=20).mean()

    # Calculate the relative strength by comparing the short-term to long-term MAs
    relative_strength_short = (ma_5 - ma_10) / ma_10
    relative_strength_long = (ma_10 - ma_20) / ma_20

    # Calculate the volume-weighted average price (VWAP)
    vwap = (df['volume'] * (df['high'] + df['low']) / 2).cumsum() / df['volume'].cumsum()

    # Calculate the divergence between the close price and VWAP
    vwap_divergence = (df['close'] - vwap) / vwap

    # Calculate the momentum of the close price over different periods
    momentum_short = np.log(df['close'] / df['close'].shift(5))
    momentum_long = np.log(df['close'] / df['close'].shift(20))

    # Calculate the volatility as the standard deviation of the log returns
    log_returns = np.log(df['close'] / df['close'].shift(1))
    volatility_short = log_returns.rolling(window=5).std()
    volatility_long = log_returns.rolling(window=20).std()

    # Calculate the volume ratio as today's volume divided by the average volume over the last 5 and 20 days
    avg_volume_5d = df['volume'].rolling(window=5).mean()
    avg_volume_20d = df['volume'].rolling(window=20).mean()
    volume_ratio_short = df['volume'] / avg_volume_5d
    volume_ratio_long = df['volume'] / avg_volume_20d

    # Combine the relative strength, VWAP divergence, momentum, and volume ratio into a single factor
    factor = (
        relative_strength_short + relative_strength_long +
        vwap_divergence +
        momentum_short + momentum_long +
        volatility_short + volatility_long +
        volume_ratio_short + volume_ratio_long
    )

    return factor
```
