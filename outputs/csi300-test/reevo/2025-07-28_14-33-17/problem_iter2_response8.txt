```python
def heuristics_v2(df: pd.DataFrame) -> pd.Series:
    # Calculate the money flow ratio which is a measure of buying to selling pressure
    typical_price = (df['high'] + df['low'] + df['close']) / 3
    money_flow = typical_price * df['volume']
    positive_flow = money_flow.where(typical_price > typical_price.shift(1), 0)
    negative_flow = money_flow.where(typical_price < typical_price.shift(1), 0)
    money_ratio = positive_flow.rolling(window=14).sum() / negative_flow.rolling(window=14).sum()

    # Calculate the relative strength compared to the average close price over the last 30 days
    avg_close_30 = df['close'].rolling(window=30).mean()
    relative_strength = df['close'] / avg_close_30

    # Calculate the 5-day and 10-day exponential moving averages of the closing prices
    ema_5 = df['close'].ewm(span=5, adjust=False).mean()
    ema_10 = df['close'].ewm(span=10, adjust=False).mean()

    # Calculate the trend strength as the difference between EMA5 and EMA10
    trend_strength = (ema_5 - ema_10) / df['close']

    # Combine the factors into a final heuristic score
    factor = (money_ratio * 0.4 + relative_strength * 0.3 + trend_strength * 0.3).fillna(0)

    return factor
```
