```python
import pandas as pd

def heuristics_v2(df, n=5):
    # Calculate Intraday Range
    intraday_range = df['high'] - df['low']
    
    # Calculate Weighted Average Price (WAP)
    wap_numerator = (df['open'] + 2 * df['close']) * df['volume'] / 2
    wap_denominator = df['volume']
    wap = wap_numerator.cumsum() / wap_denominator.cumsum()
    
    # Combine Intraday Range and WAP
    high_wap_diff = df['high'] - wap
    low_wap_diff = wap - df['low']
    combined_factor = high_wap_diff + low_wap_diff
    
    # Apply an exponential moving average to smooth the factor
    smoothed_factor = combined_factor.ewm(span=n, adjust=False).mean()
    
    return smoothed_factor
```
