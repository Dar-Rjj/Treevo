```python
import pandas as pd
import numpy as np

def heuristics_v2(df):
    # Compute typical price
    typical_price = (df['high'] + df['low'] + df['close']) / 3
    
    # Compute volume weighted typical price
    vtp = typical_price * df['volume']
    
    # Compute smoothed average of volume weighted typical price over a 14-day window
    sma_vtp = vtp.rolling(window=14).mean()
    
    # Compute the ratio of today's volume to the 14-day average volume
    avg_volume = df['volume'].rolling(window=14).mean()
    volume_ratio = df['volume'] / avg_volume
    
    # Calculate the money flow ratio
    positive_mf = np.where(typical_price > typical_price.shift(1), vtp, 0)
    negative_mf = np.where(typical_price < typical_price.shift(1), vtp, 0)
    positive_mf_sum = pd.Series(positive_mf).rolling(window=14).sum()
    negative_mf_sum = pd.Series(negative_mf).rolling(window=14).sum()
    money_flow_ratio = positive_mf_sum / negative_mf_sum
    
    # Generate the final factor by combining the above components
    alpha_factor = (sma_vtp / typical_price) * (money_flow_ratio - 1) * volume_ratio
    
    return alpha_factor
```
