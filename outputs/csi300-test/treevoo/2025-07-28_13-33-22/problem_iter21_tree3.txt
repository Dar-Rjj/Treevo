```txt
Intraday Momentum and Reversal with Enhanced Volatility, Volume Weighting, Spike Adjustments, and Combined Intraday Features
├── Calculate Intraday Range
│   ├── Use High Price
│   ├── Use Low Price
│   └── Subtract Low from High
├── Adjust by Volume and Price Spikes
│   ├── Identify Volume Spikes
│   │   ├── Use Volume
│   │   └── Compare with Previous Volume
│   └── Identify Price Spikes
│       ├── Use Close Price
│       └── Compare with Previous Close Price
├── Introduce Volatility Adjustment
│   ├── Calculate Log Returns
│   │   ├── Use Close Prices of Current and Previous Day
│   │   └── Take Logarithm of (Current Close / Previous Close)
│   ├── Compute Standard Deviation of Log Returns
│   │   ├── Over a Fixed Number of Days
│   │   └── Use Rolling Window
│   └── Adjust Intraday Momentum
│       └── Multiply Intraday Momentum by the Inverse of Standard Deviation
├── Scale Intraday Momentum
│   ├── Divide Intraday Momentum by Combined Spike
│   │   ├── Combine Volume and Price Spikes
│   │   └── Add Volume Spike and Price Spike
│   └── Cap at a Threshold to Avoid Extreme Values
├── Calculate Opening Gap
│   ├── Use Open price
│   └── Use Close price from the previous day
│   └── Subtract Previous Close from Open
├── Calculate Close-to-Open Return
│   ├── Use Close price
│   └── Use Open price
│   └── Subtract Open from Close
├── Calculate Price Change
│   ├── Current Close
│   └── Previous Close
│   └── Subtract Previous Close from Current Close
├── Intraday Midpoint
│   ├── Sum (High + Low)
│   └── Divide by 2
├── Combined Intraday Features
│   ├── Subtract Intraday Midpoint from Open price
│   └── Subtract Opening Gap from result
├── Enhanced Intraday Factor
│   ├── Average Intraday Range over n periods
│   └── Multiply by (Close-to-Open Return + Price Change)
│   └── Add Combined Intraday Features
├── Enhance with Recent Volatility
│   ├── Calculate Absolute Price Change
│   │   ├── Use Current Close
│   │   └── Use Previous Close
│   │   └── Subtract Previous Close from Current Close
│   │   └── Take Absolute Value
│   └── Average Absolute Price Change over m periods
│   └── Multiply combined feature by this average
├── Weight by Volume
│   ├── Use Volume
│   ├── Average Volume over k periods
│   └── Divide Volume by Average Volume
│   └── If Volume is greater than Average Volume, set to 1; otherwise, set to 0.5
│   └── Multiply Enhanced Intraday Factor by this adjusted volume factor
└── Adjust for Volume Spikes
    ├── Compare Current Volume to Previous Volume
    └── Scale Combined Feature by Volume Spike Factor
    └── Cap at Threshold
├── Incorporate Trend Strength
│   ├── Calculate Long-Term Moving Average
│   │   ├── Use Close Prices
│   │   └── Over a Long Term (e.g., 100 days)
│   └── Calculate Short-Term Moving Average
│       ├── Use Close Prices
│       └── Over a Short Term (e.g., 20 days)
│   └── Determine Trend Direction
│       └── Compare Long-Term and Short-Term Moving Averages
├── Adjust Intraday Momentum by Trend
│   ├── If Trend is Up, Increase Intraday Momentum
│   │   └── Multiply Intraday Momentum by a Positive Factor (e.g., 1.2)
│   └── If Trend is Down, Decrease Intraday Momentum
│       └── Multiply Intraday Momentum by a Negative Factor (e.g., 0.8)
├── Incorporate Volume Surge Factor
│   ├── Calculate Volume Surge
│   │   ├── Use Volume
│   │   └── Compare with Previous Volume
│   └── Adjust Intraday Momentum
│       └── If Volume Surge is High, Increase Intraday Momentum
│           └── Multiply Intraday Momentum by a Positive Factor (e.g., 1.1)
│       └── If Volume Surge is Low, Decrease Intraday Momentum
│           └── Multiply Intrad
