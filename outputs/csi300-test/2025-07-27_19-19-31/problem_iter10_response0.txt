```python
def heuristics_v2(df: pd.DataFrame) -> pd.Series:
    # Calculate the 10-day moving average of close prices to capture momentum
    ma_10_close = df['close'].rolling(window=10).mean()
    
    # Calculate the 30-day moving average of close prices for longer-term trend
    ma_30_close = df['close'].rolling(window=30).mean()
    
    # Compute the difference between the two moving averages to gauge momentum
    momentum_factor = ma_10_close - ma_30_close
    
    # Calculate the 10-day standard deviation of close prices to represent volatility
    volatility_factor = df['close'].rolling(window=10).std()
    
    # Calculate the 10-day average volume to measure liquidity
    avg_volume = df['volume'].rolling(window=10).mean()
    
    # Calculate a liquidity factor as the ratio of current volume to the 10-day average volume
    liquidity_factor = df['volume'] / avg_volume
    
    # Calculate the 10-day rate of change in close price
    roc_10_close = (df['close'] - df['close'].shift(10)) / df['close'].shift(10)
    
    # Calculate the 5-day rate of change in volume
    roc_5_volume = (df['volume'] - df['volume'].shift(5)) / df['volume'].shift(5)
    
    # Adjust for market cap (assuming 'market_cap' column exists in the DataFrame)
    if 'market_cap' in df.columns:
        market_cap_adjustment = df['market_cap'].shift(1) / df['market_cap']
    else:
        market_cap_adjustment = 1.0  # No adjustment if market cap is not available
    
    # Combine the factors: momentum, adjusted by volatility, liquidity, and market cap
    factor_value = (momentum_factor * liquidity_factor * roc_10_close * (1 + roc_5_volume)) / (volatility_factor + 1e-6) * market_cap_adjustment
    
    return factor_value
```
