```python
import pandas as pd
import numpy as np

def heuristics_v2(df, n=5, N=20):
    # Calculate Momentum Components
    df['Close_Momentum'] = df['close'] / df['close'].shift(n) - 1
    df['Open_Momentum'] = df['open'] / df['open'].shift(n) - 1
    df['Volume_Momentum'] = df['volume'] / df['volume'].shift(n) - 1

    # Calculate Daily Log Return
    df['Log_Return'] = np.log(df['close']) - np.log(df['close'].shift(1))

    # Calculate Open-Adjusted Daily Log Return
    df['Open_Adjusted_Log_Return'] = df['Log_Return'] - (np.log(df['open']) - np.log(df['close'].shift(1)))

    # Multiply Open-Adjusted Log Return by Volume
    df['Open_Adjusted_Volume_Log_Return'] = df['Open_Adjusted_Log_Return'] * df['volume']

    # Sum Over N Days
    df['Cumulative_Open_Adjusted_Volume_Log_Return'] = df['Open_Adjusted_Volume_Log_Return'].rolling(window=N).sum()

    # Detect Volume Shocks
    df['Daily_Return'] = df['close'] / df['close'].shift(1) - 1
    df['Volume_Change'] = df['volume'] - df['volume'].shift(1)
    
    avg_30_day_volume_change = df['Volume_Change'].rolling(window=30).mean()
    volume_shock_threshold = 2 * avg_30_day_volume_change
    df['Volume_Shock'] = (df['Volume_Change'] > volume_shock_threshold).astype(int)

    # Combine Indicators
    df['Momentum_Sum'] = df['Close_Momentum'] + df['Open_Momentum'] + df['Volume_Momentum']
    df['Alpha_Factor'] = df['Momentum_Sum'] * df['Volume_Shock']

    return df['Alpha_Factor']
```
