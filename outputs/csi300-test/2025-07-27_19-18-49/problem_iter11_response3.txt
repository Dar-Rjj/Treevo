```python
import pandas as pd
import numpy as np

def heuristics_v2(df, n=10, m=5, L=30, N=20):
    # Calculate Momentum Components
    df['Close_Momentum'] = df['close'].pct_change(n)
    df['Open_Momentum'] = df['open'].pct_change(n)
    df['Volume_Momentum'] = df['volume'].pct_change(n)
    
    # Calculate Daily Log Return
    df['Log_Return'] = np.log(df['close']) - np.log(df['close'].shift(1))
    
    # Adjust Log Return by Open Price
    df['Open_Adjusted_Log_Return'] = (np.log(df['close']) - np.log(df['open'])) + np.log(df['close'].shift(1)) - np.log(df['open'].shift(1))
    
    # Multiply Open-Adjusted Log Return by Volume
    df['Volume_Adjusted_Log_Return'] = df['Open_Adjusted_Log_Return'] * df['volume']
    
    # Weight by Recent Trading Activity
    df['Short_Term_Avg_Volume'] = df['volume'].rolling(window=m).mean()
    df['Long_Term_Avg_Volume'] = df['volume'].rolling(window=L).mean()
    df['Weight'] = df['Short_Term_Avg_Volume'] / df['Long_Term_Avg_Volume']
    
    # Detect Volume Shocks
    df['Daily_Return'] = df['close'].pct_change()
    df['Volume_Change'] = df['volume'] - df['volume'].shift(1)
    average_vol_change = df['Volume_Change'].rolling(window=30).mean() * 2
    df['Volume_Shock'] = (df['Volume_Change'] > average_vol_change).astype(int)
    
    # Combine Indicators
    df['Momentum_Sum'] = (df['Close_Momentum'] * df['Weight']) + (df['Open_Momentum'] * df['Weight']) + (df['Volume_Momentum'] * df['Weight'])
    df['Volume_Shock_Factor'] = df['Volume_Shock'] * 1
    df['Combined_Indicator'] = df['Momentum_Sum'] * df['Volume_Shock_Factor']
    
    # Cumulative Sum of Volume-Weighted Adjusted Returns
    df['Cumulative_Sum'] = (df['Volume_Adjusted_Log_Return'] * df['Volume_Shock_Factor']).rolling(window=N).sum()
    
    # Final Alpha Factor
    df['Alpha_Factor'] = df['Combined_Indicator'] + df['Cumulative_Sum']
    
    return df['Alpha_Factor']

# Example usage:
# alpha_factor = heuristics_v2(df, n=10, m=5, L=30, N=20)
```
