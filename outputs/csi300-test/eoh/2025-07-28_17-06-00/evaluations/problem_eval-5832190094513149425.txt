def heuristics_v2(df):
    # Define the lookback window for calculations
    window_size = 20
    
    # Calculate the weighted average of the high and low prices using 'amount' as weights
    df['weighted_high'] = (df['high'] * df['amount']).rolling(window=window_size).sum() / df['amount'].rolling(window=window_size).sum()
    df['weighted_low'] = (df['low'] * df['amount']).rolling(window=window_size).sum() / df['amount'].rolling(window=window_size).sum()
    
    # Calculate the Rate of Change (ROC) of the close price
    df['roc_close'] = df['close'].pct_change(periods=window_size)
    
    # Construct the heuristics matrix by combining the difference between weighted averages and ROC
    heuristics_matrix = (df['weighted_high'] - df['weighted_low']) * df['roc_close']
    
    return heuristics_matrix
