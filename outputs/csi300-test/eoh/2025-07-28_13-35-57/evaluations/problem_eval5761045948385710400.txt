import pandas as pd
import numpy as np

def heuristics_v2(df):
    # Calculate simple moving averages for 5, 10, and 20 days
    sma_5 = df['close'].rolling(window=5).mean()
    sma_10 = df['close'].rolling(window=10).mean()
    sma_20 = df['close'].rolling(window=20).mean()
    
    # Calculate price change from the previous day
    price_change = df['close'].pct_change()
    
    # Calculate exponentially weighted moving average (EWMA) of price change
    ewma_price_change = price_change.ewm(span=20, adjust=False).mean()
    
    # Construct the heuristic factor as a weighted sum
    heuristics_matrix = (sma_5 * 0.3 + sma_10 * 0.4 + sma_20 * 0.3) * ewma_price_change
    
    return heuristics_matrix
