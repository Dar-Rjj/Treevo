import pandas as pd
import numpy as np

def heuristics_v2(df):
    wma_close = (df['close'] * df['volume']).rolling(window=20).sum() / df['volume'].rolling(window=20).sum()
    sma_high_low = (df['high'] + df['low']) / 2
    sma_high_low_avg = sma_high_low.rolling(window=20).mean()
    heuristics_matrix = wma_close - sma_high_low_avg
    return heuristics_matrix
