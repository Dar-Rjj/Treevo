import pandas as pd

def heuristics_v2(df):
    # Calculate 20-day SMA of close prices
    sma_20 = df['close'].rolling(window=20).mean()
    # Rate of change in 20-day SMA
    sma_change_rate = sma_20.pct_change()
    
    # Ratio of today's volume to 30-day max volume
    volume_ratio = df['volume'] / df['volume'].rolling(window=30).max()
    
    # Distance between the current close and the 5-day high
    high_5 = df['high'].rolling(window=5).max()
    high_distance = df['close'] - high_5
    
    # Combine into a single heuristics matrix
    heuristics_matrix = sma_change_rate + volume_ratio + high_distance
    return heuristics_matrix
