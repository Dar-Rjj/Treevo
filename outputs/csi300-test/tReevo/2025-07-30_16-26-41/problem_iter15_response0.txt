```python
import pandas as pd
import numpy as np

def heuristics_v2(df):
    # Calculate short-term volatility
    short_volatility = df['close'].pct_change().rolling(window=10).std()
    
    # Calculate long-term volatility
    long_volatility = df['close'].pct_change().rolling(window=50).std()
    
    # Determine market trend (for simplicity, we use a simple moving average crossover)
    short_trend = df['close'].rolling(window=10).mean() > df['close'].rolling(window=20).mean()
    long_trend = df['close'].rolling(window=50).mean() > df['close'].rolling(window=100).mean()

    # Adjust window sizes based on market trend
    short_window = np.where(short_trend, 10, 5)
    long_window = np.where(long_trend, 50, 20)

    # Volume-weighted exponential smoothing
    alpha = 0.2  # Smoothing factor
    smoothed_close = (df['close'] * df['volume']).ewm(alpha=alpha, adjust=False).mean() / df['volume'].ewm(alpha=alpha, adjust=False).mean()

    # Calculate short-term momentum
    short_momentum = (smoothed_close - df['open']) / df['open']

    # Calculate long-term momentum
    long_momentum = (smoothed_close - df['low']) / df['low']

    # Combine short- and long-term momentum
    combined_momentum = (short_momentum + long_momentum) / 2

    # Sentiment score (dummy data, replace with actual sentiment score from external data)
    sentiment_score = pd.Series(np.random.normal(1, 0.1, len(df)), index=df.index)

    # Final alpha factor
    alpha_factor = (combined_momentum * sentiment_score) / (short_volatility + long_volatility + 1e-6)

    return alpha_factor
```
