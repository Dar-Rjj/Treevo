```python
import pandas as pd
import numpy as np

def average_true_range(high, low, close, n=14):
    tr = np.maximum.reduce([high - low, abs(high - close.shift()), abs(low - close.shift())])
    atr = tr.rolling(window=n).mean()
    return atr

def volume_weighted_average_price(high, low, close, volume):
    vwap = (volume * (high + low + close) / 3).cumsum() / volume.cumsum()
    return vwap

def moving_average(data, window):
    return data.rolling(window=window).mean()

def high_low_price_ratio(high, low, close, n=20):
    hl_ratio = (close > high.shift(1)).rolling(window=n).sum() / n
    return hl_ratio

def open_close_spread(open, close):
    return (close - open) / open

def heuristics_v2(df):
    # Calculate ATR
    df['ATR'] = average_true_range(df['high'], df['low'], df['close'])
    
    # Calculate VWAP
    df['VWAP'] = volume_weighted_average_price(df['high'], df['low'], df['close'], df['volume'])
    
    # Short-term moving averages
    df['SMA_10'] = moving_average(df['close'], 10)
    df['SMA_20'] = moving_average(df['close'], 20)
    
    # Long-term moving averages
    df['SMA_50'] = moving_average(df['close'], 50)
    df['SMA_200'] = moving_average(df['close'], 200)
    
    # Momentum signals
    df['Short_Term_Crossover'] = df['SMA_10'] - df['SMA_20']
    df['Long_Term_Crossover'] = df['SMA_50'] - df['SMA_200']
    
    # Volume spikes
    df['Volume_Spike'] = df['volume'] > df['volume'].rolling(window=10).mean() * 1.5
    
    # High-Low Price Ratio
    df['High_Low_Ratio'] = high_low_price_ratio(df['high'], df['low'], df['close'])
    
    # Open-Close Spread
    df['Open_Close_Spread'] = open_close_spread(df['open'], df['close'])
    
    # Combine factors into a single alpha factor
    df['Alpha_Factor'] = (
        df['Short_Term_Crossover'] + 
        df['Long_Term_Crossover'] + 
        df['High_Low_Ratio'] * df['Volume_Spike'] + 
        df['Open_Close_Spread'] + 
        df['VWAP'] / df['ATR']
    )
    
    return df['Alpha_Factor']
```
