```python
import pandas as pd

def heuristics_v2(df):
    # Calculate simple moving averages
    df['SMA_10'] = df['close'].rolling(window=10).mean()
    df['SMA_30'] = df['close'].rolling(window=30).mean()

    # Calculate exponential moving averages
    df['EMA_10'] = df['close'].ewm(span=10, adjust=False).mean()
    df['EMA_30'] = df['close'].ewm(span=30, adjust=False).mean()

    # Compute the difference between 20-day EMA and 50-day EMA as a trend strength indicator
    df['Trend_Strength'] = df['EMA_20'] - df['EMA_50']
    df['EMA_20'] = df['close'].ewm(span=20, adjust=False).mean()
    df['EMA_50'] = df['close'].ewm(span=50, adjust=False).mean()

    # Calculate the rate of change (ROC) of the 50-day EMA
    df['ROC_EMA_50'] = df['EMA_50'].pct_change(periods=50)

    # Calculate the relative strength index (RSI) over the past 14 days
    delta = df['close'].diff(1)
    gain = (delta.where(delta > 0, 0)).rolling(window=14).mean()
    loss = (-delta.where(delta < 0, 0)).rolling(window=14).mean()
    rs = gain / loss
    df['RSI'] = 100 - (100 / (1 + rs))

    # Compute the moving average convergence divergence (MACD) using 12-day and 26-day EMAs
    df['MACD_Line'] = df['EMA_12'] - df['EMA_26']
    df['EMA_12'] = df['close'].ewm(span=12, adjust=False).mean()
    df['EMA_26'] = df['close'].ewm(span=26, adjust=False).mean()
    df['Signal_Line'] = df['MACD_Line'].ewm(span=9, adjust=False).mean()
    df['MACD_Histogram'] = df['MACD_Line'] - df['Signal_Line']

    # Flag days with trading volume significantly higher than the 20-day moving average
    df['Volume_MA_20'] = df['volume'].rolling(window=20).mean()
    df['Volume_Spike'] = (df['volume'] > df['Volume_MA_20'] * 2).astype(int)

    # Calculate the correlation between daily volume and price changes over the past 30 days
    df['Price_Change'] = df['close'].pct_change()
    df['Volume_Price_Correlation'] = df['Price_Change'].rolling(window=30).corr(df['volume'])

    # Analyze the ratio of up-volume to down-volume over the past 30 days
    df['Up_Volume'] = df['volume'] * (df['close'] > df['close'].shift(1)).astype(int)
    df['Down_Volume'] = df['volume'] * (df['close'] < df['close'].shift(1)).astype(int)
    df['Up_Volume_Sum'] = df['Up_Volume'].rolling(window=30).sum()
    df['Down_Volume_Sum'] = df['Down_Volume'].rolling(window=30).sum()
    df['Volume_Ratio'] = df['Up_Volume_Sum'] / df['Down_Volume_Sum']

    # Calculate the VWAP over the past 30 days
    df['VWAP'] = (df['volume'] * (df['high'] + df['low']) / 2).cumsum() / df['volume'].cumsum()
    df['VWAP_Compare'] = (df['close'] - df['VWAP']).pct_change()

    # Determine daily price range and its ratio to the closing price
    df['Daily_Range'] = df['high'] - df['low']
    df['Range_Ratio'] = df['Daily_Range'] / df['close']

    # Measure the difference between the opening price of the current day and the closing price of the previous day
    df['Open_Gap'] = df['open'] - df['close'].shift(1)
    df['Bullish_Open_Gap'] = (df['Open_Gap'] > 0).astype(int)
    df['Bearish_Open_Gap'] = (df['Open_Gap'] < 0).astype(int)

    # Calculate the
