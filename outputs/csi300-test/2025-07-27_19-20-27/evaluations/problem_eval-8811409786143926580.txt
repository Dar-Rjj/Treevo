import pandas as pd
import numpy as np

def heuristics_v2(df):
    short_window = 12
    long_window = 26
    signal_window = 9
    
    # Calculate the rate of change (ROC)
    roc = df['close'].pct_change(periods=short_window) * 100
    
    # Calculate the MACD components
    ema_short = df['close'].ewm(span=short_window, adjust=False).mean()
    ema_long = df['close'].ewm(span=long_window, adjust=False).mean()
    macd_line = ema_short - ema_long
    signal_line = macd_line.ewm(span=signal_window, adjust=False).mean()
    
    # Calculate the MACD histogram
    macd_histogram = macd_line - signal_line
    
    # Calculate the standard deviation of returns as a measure of volatility
    std_dev = df['close'].pct_change().rolling(window=long_window).std()
    
    # Combine ROC and MACD histogram, then scale by the standard deviation
    heuristics_matrix = (roc + macd_histogram) / std_dev
    return heuristics_matrix
