import pandas as pd

def heuristics_v2(df):
    short_window = 5
    long_window = 20
    
    # Calculate the momentum
    momentum = df['close'].pct_change(long_window)
    
    # Calculate the ADX
    tr = df['high'] - df['low']
    tr_high = (df['high'] - df['close'].shift(1)).abs()
    tr_low = (df['low'] - df['close'].shift(1)).abs()
    tr_max = pd.DataFrame({'tr': tr, 'tr_high': tr_high, 'tr_low': tr_low}).max(axis=1)
    atr = tr_max.rolling(window=long_window).mean()
    
    up_move = df['high'] - df['high'].shift(1)
    down_move = df['low'].shift(1) - df['low']
    pos_dm = pd.Series(index=df.index, dtype='float64')
    neg_dm = pd.Series(index=df.index, dtype='float64')
    pos_dm[up_move > down_move] = up_move
    neg_dm[down_move > up_move] = down_move
    
    pos_di = 100 * (pos_dm / atr).ewm(span=long_window, adjust=False).mean()
    neg_di = 100 * (neg_dm / atr).ewm(span=long_window, adjust=False).mean()
    adx = 100 * (pos_di - neg_di).abs() / (pos_di + neg_di).ewm(span=long_window, adjust=False).mean()
    
    # Calculate the RSI
    gain = df['close'].diff().clip(lower=0).ewm(span=short_window, adjust=False).mean()
    loss = df['close'].diff().clip(upper=0).ewm(span=short_window, adjust=False).mean().abs()
    rs = gain / loss
    rsi = 100 - (100 / (1 + rs))
    
    # Combine the factors
    heuristics_matrix = (momentum * adx) / rsi
    return heuristics_matrix
