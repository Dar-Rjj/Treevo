def heuristics_v2(df):
    # Calculate the 20-day Average True Range (ATR)
    tr = df['high'].combine(df['close'].shift(), max) - df['low'].combine(df['close'].shift(), min)
    atr = tr.rolling(window=20).mean()
    
    # Calculate the 15-day Stochastic Oscillator
    lowest_low = df['low'].rolling(window=15).min()
    highest_high = df['high'].rolling(window=15).max()
    k = ((df['close'] - lowest_low) / (highest_high - lowest_low)) * 100
    
    # Combine ATR and Stochastic Oscillator to form the heuristic factor
    heuristics_matrix = (k - 50) + atr
    
    return heuristics_matrix
