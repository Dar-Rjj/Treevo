[
     {
          "algorithm": "The new algorithm calculates a modified trend factor by incorporating exponential moving averages of different lengths and then adjusts this factor based on the average true range to reflect market volatility, finally outputting this as the heuristics matrix.",
          "code": "import pandas as pd\nimport numpy as np\n\ndef heuristics_v2(df):\n    short_window = 5\n    long_window = 20\n    very_long_window = 60\n    \n    short_ema = df['close'].ewm(span=short_window, adjust=False).mean()\n    long_ema = df['close'].ewm(span=long_window, adjust=False).mean()\n    very_long_ema = df['close'].ewm(span=very_long_window, adjust=False).mean()\n\n    # Custom weight for emphasizing recent price movements\n    trend_factor = (2 * short_ema - long_ema) / 2\n    \n    # Calculate average true range over the long window as a measure of volatility\n    tr1 = df['high'] - df['low']\n    tr2 = np.abs(df['high'] - df['close'].shift())\n    tr3 = np.abs(df['low'] - df['close'].shift())\n    true_range = pd.concat([tr1, tr2, tr3], axis=1).max(axis=1)\n    atr = true_range.rolling(window=long_window).mean()\n\n    heuristics_matrix = trend_factor / atr\n    return heuristics_matrix",
          "objective": -0.03794,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm combines exponential moving averages of different periods, applies a dynamic weighting based on the ratio of short-term to long-term volatility, and then calculates the ratio between this weighted trend and the historical average true range.",
          "code": "import pandas as pd\n\ndef heuristics_v2(df):\n    short_window = 5\n    long_window = 20\n    very_long_window = 60\n    \n    # Calculate exponential moving averages\n    short_ema = df['close'].ewm(span=short_window, adjust=False).mean()\n    long_ema = df['close'].ewm(span=long_window, adjust=False).mean()\n    very_long_ema = df['close'].ewm(span=very_long_window, adjust=False).mean()\n\n    # Calculate short-term and long-term volatility\n    short_volatility = df['close'].rolling(window=short_window).std()\n    long_volatility = df['close'].rolling(window=long_window).std()\n\n    # Dynamic weighting based on the ratio of short-term to long-term volatility\n    weight_factor = short_volatility / long_volatility\n    trend_factor = (weight_factor * short_ema + (1 - weight_factor) * long_ema) / 2\n\n    # Calculate the historical average true range\n    tr = df['high'] - df['low']\n    atr = tr.rolling(window=long_window).mean()\n\n    heuristics_matrix = trend_factor / atr\n    return heuristics_matrix",
          "objective": -0.02818,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates a 20-day RSI and combines it with a 5-day ROC, aiming to capture more immediate momentum and overbought/oversold conditions.",
          "code": "def heuristics_v2(df):\n    # Calculate the 20-day Relative Strength Index (RSI)\n    delta = df['close'].diff()\n    gain = delta.where(delta > 0, 0)\n    loss = -delta.where(delta < 0, 0)\n    avg_gain = gain.rolling(window=20).mean()\n    avg_loss = loss.rolling(window=20).mean()\n    rs = avg_gain / avg_loss\n    rsi = 100 - (100 / (1 + rs))\n    \n    # Calculate the 5-day Rate of Change (ROC)\n    roc = df['close'].pct_change(periods=5) * 100\n    \n    # Combine RSI and ROC to form the heuristic factor\n    heuristics_matrix = (rsi - 50) + roc\n    \n    return heuristics_matrix",
          "objective": -0.02228,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm generates alpha factors by integrating the rate of change in price with the relative strength index to capture both momentum and overbought/oversold conditions.",
          "code": "def heuristics_v2(df):\n    # Calculate the 14-day Relative Strength Index (RSI)\n    delta = df['close'].diff()\n    gain = delta.where(delta > 0, 0)\n    loss = -delta.where(delta < 0, 0)\n    avg_gain = gain.rolling(window=14).mean()\n    avg_loss = loss.rolling(window=14).mean()\n    rs = avg_gain / avg_loss\n    rsi = 100 - (100 / (1 + rs))\n    \n    # Calculate the 10-day Rate of Change (ROC)\n    roc = df['close'].pct_change(periods=10) * 100\n    \n    # Combine RSI and ROC to form the heuristic factor\n    heuristics_matrix = (rsi - 50) + roc\n    \n    return heuristics_matrix",
          "objective": -0.02182,
          "other_inf": null
     }
]