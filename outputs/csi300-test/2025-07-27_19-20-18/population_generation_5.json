[
     {
          "algorithm": "The new algorithm calculates an alpha factor by integrating the exponential moving average (EMA) of the last 10 days' closing prices with the logarithm of the ratio of today's trading amount to the 10-day EMA of the trading amount, aiming to emphasize recent price and trading activity trends.",
          "code": "import pandas as pd\n\ndef heuristics_v2(df):\n    ema_close = df['close'].ewm(span=10, adjust=False).mean()\n    ema_amount = df['amount'].ewm(span=10, adjust=False).mean()\n    amount_ratio_log = (df['amount'] / ema_amount).apply(lambda x: max(0.0001, x)).apply(np.log)\n    heuristics_matrix = ema_close * amount_ratio_log\n    return heuristics_matrix",
          "objective": -0.07592,
          "other_inf": null
     },
     {
          "algorithm": "The algorithm calculates a set of heuristics based on price and volume trends, combining moving averages, momentum indicators, and volatility measures to generate an interpretable factor for stock returns.",
          "code": "import pandas as pd\n\ndef heuristics_v2(df):\n    def calculate_moving_average(series, window=14):\n        return series.rolling(window=window).mean()\n\n    def calculate_momentum(series, period=10):\n        return series / series.shift(period) - 1\n\n    def calculate_volatility(series, window=20):\n        return series.rolling(window=window).std()\n\n    close = df['close']\n    volume = df['volume']\n\n    ma_short = calculate_moving_average(close, window=5)\n    ma_long = calculate_moving_average(close, window=30)\n    momentum = calculate_momentum(close, period=10)\n    vol = calculate_volatility(close, window=20)\n\n    heuristics_matrix = (ma_short - ma_long) * momentum / vol * (volume / volume.shift(1))\n\n    return heuristics_matrix",
          "objective": -0.03438,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates an alpha factor by integrating the average of the last 10 days' closing prices with the ratio of today's trading amount to the 10-day moving average of the trading amount, aiming to capture the momentum adjusted for recent trading activity.",
          "code": "import pandas as pd\n\ndef heuristics_v2(df):\n    avg_close = df['close'].rolling(window=10).mean()\n    avg_amount = df['amount'].rolling(window=10).mean()\n    amount_ratio = df['amount'] / avg_amount\n    heuristics_matrix = avg_close * amount_ratio\n    return heuristics_matrix",
          "objective": -0.03253,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm computes an alpha factor by combining the relative strength index (RSI) of the closing prices with the ratio of today's volume to the 30-day moving average of the volume, aiming to capture the interaction between price momentum and recent trading activity.",
          "code": "import pandas as pd\n\ndef heuristics_v2(df):\n    def calculate_rsi(series, window=14):\n        delta = series.diff(1)\n        gain = (delta.where(delta > 0, 0)).rolling(window=window).mean()\n        loss = (-delta.where(delta < 0, 0)).rolling(window=window).mean()\n        rs = gain / loss\n        return 100 - (100 / (1 + rs))\n\n    def calculate_moving_average(series, window=30):\n        return series.rolling(window=window).mean()\n\n    close = df['close']\n    volume = df['volume']\n\n    rsi = calculate_rsi(close, window=14)\n    ma_volume = calculate_moving_average(volume, window=30)\n    volume_ratio = volume / ma_volume\n\n    heuristics_matrix = rsi * volume_ratio\n\n    return heuristics_matrix",
          "objective": -0.02732,
          "other_inf": null
     }
]