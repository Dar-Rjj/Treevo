```txt
Enhanced Momentum and Reversal Factor with Volume Adjustment
├── Calculate Raw Returns
│   ├── Use Close price
│   └── Compute daily return
├── Momentum Component
│   ├── Calculate 10-day Moving Sum of Returns
│   │   └── Use Raw Returns
│   └── Subtract 5-day Moving Sum of Returns
│       └── Use Raw Returns
├── Reversal Component
│   ├── Calculate 21-day Moving Average of Returns
│   │   └── Use Raw Returns
│   └── Invert the Sign
│       └── Multiply by -1
├── Price Momentum with Volume Weight
│   ├── Calculate Daily Price Change
│   │   ├── Use Close price
│   │   └── Subtract Previous Day's Close price
│   ├── Calculate Rolling Average of Daily Price Changes
│   │   ├── Aggregate Daily Price Changes
│   │   └── Compute 10-Day Moving Average
│   ├── Calculate Volume Weighted Daily Return
│   │   ├── Calculate Daily Return
│   │   │   ├── Use Close price
│   │   │   └── Divide by Open price
│   │   └── Multiply by Volume
│   └── Summarize Volume Weighted Daily Returns
│       ├── Aggregate Volume Weighted Daily Returns
│       └── Compute 20-Day Moving Average
├── Adjusted Momentum and Reversal
│   ├── Normalize Momentum Component
│   │   └── Divide by Standard Deviation of Momentum Component
│   ├── Normalize Reversal Component
│   │   └── Divide by Standard Deviation of Reversal Component
│   └── Combine Normalized Momentum and Reversal Components
│       └── Sum Normalized Components
└── Final Alpha Factor
    ├── Combine Signals
    │   ├── Take Difference between Rolling Average and Volume Weighted MA
    │   └── Smooth the Result
    │       ├── Apply 5-Day Moving Average to the Difference
    │       └── Use as Final Alpha Factor
    └── Incorporate Volume Shock Factor
        ├── Calculate Volume Shock
        │   ├── Compute Volume Change
        │   │   ├── Use Current Volume
        │   │   └── Subtract Previous Day's Volume
        │   └── Compute 5-Day Moving Average of Volume Change
        └── Multiply Combined Momentum and Reversal by Volume Shock
            └── Use Combined Momentum and Reversal
```
