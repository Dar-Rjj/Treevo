def heuristics_v2(df):
    lookback_period = 20
    price_momentum = (df['close'] - df[['high', 'low']].median(axis=1).shift(lookback_period)) / df[['high', 'low']].median(axis=1).shift(lookback_period)
    amount_wma = df['amount'].rolling(window=lookback_period).mean().pct_change()
    volume_wma = df['volume'].rolling(window=lookback_period).mean().pct_change()

    # Fixed weights
    w_price = 0.5
    w_amount = 0.3
    w_volume = 0.2

    # Calculate the heuristic factor
    heuristics_matrix = (w_price * price_momentum) + (w_amount * amount_wma) + (w_volume * volume_wma)
    return heuristics_matrix
