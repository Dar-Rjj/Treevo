import pandas as pd
import numpy as np

def heuristics_v2(df):
    close_sma = df['close'].rolling(window=20).mean()
    vol_ratio = df['volume'] / df['volume'].rolling(window=20).mean()
    weighted_diff = (df['close'] - close_sma) ** 2 * vol_ratio
    heuristics_matrix = weighted_diff.sum()
    return heuristics_matrix
