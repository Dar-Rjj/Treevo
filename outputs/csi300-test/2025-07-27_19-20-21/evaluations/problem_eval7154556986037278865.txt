def heuristics_v2(df):
    # Calculate Williams %R
    highest_high = df['high'].rolling(window=14).max()
    lowest_low = df['low'].rolling(window=14).min()
    williams_r = -100 * (highest_high - df['close']) / (highest_high - lowest_low)
    
    # Calculate Chaikin Money Flow (CMF)
    money_flow_multiplier = ((df['close'] - df['low']) - (df['high'] - df['close'])) / (df['high'] - df['low'])
    money_flow_volume = money_flow_multiplier * df['volume']
    cmf = money_flow_volume.rolling(window=20).sum() / df['volume'].rolling(window=20).sum()
    
    # Calculate Aroon Oscillator
    aroon_up = 100 * df['high'].rolling(window=25).apply(lambda x: (x.argmax() + 1) / 25)
    aroon_down = 100 * df['low'].rolling(window=25).apply(lambda x: (x.argmin() + 1) / 25)
    aroon_oscillator = aroon_up - aroon_down
    
    # Calculate MACD
    exp12 = df['close'].ewm(span=12, adjust=False).mean()
    exp26 = df['close'].ewm(span=26, adjust=False).mean()
    macd = exp12 - exp26
    signal = macd.ewm(span=9, adjust=False).mean()
    macd_histogram = macd - signal
    
    # Combine Williams %R, CMF, Aroon Oscillator, and MACD Histogram into a single heuristic matrix
    heuristics_matrix = 0.3 * williams_r + 0.3 * cmf + 0.2 * aroon_oscillator + 0.2 * macd_histogram
    
    return heuristics_matrix
