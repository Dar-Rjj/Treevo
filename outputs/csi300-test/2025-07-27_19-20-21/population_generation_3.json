[
     {
          "algorithm": "The new algorithm integrates the concepts of trend and mean reversion by combining the Percentage Price Oscillator (PPO) with the Bollinger Bands to generate a signal that predicts future stock returns.",
          "code": "def heuristics_v3(df):\n    # Calculate the 12-period EMA and 26-period EMA\n    ema_12 = df['close'].ewm(span=12, adjust=False).mean()\n    ema_26 = df['close'].ewm(span=26, adjust=False).mean()\n    \n    # Calculate the Percentage Price Oscillator (PPO)\n    ppo_line = ((ema_12 - ema_26) / ema_26) * 100\n    \n    # Calculate Bollinger Bands\n    sma_20 = df['close'].rolling(window=20).mean()\n    std_20 = df['close'].rolling(window=20).std()\n    upper_band = sma_20 + (2 * std_20)\n    lower_band = sma_20 - (2 * std_20)\n    \n    # Calculate the %B indicator (position within Bollinger Bands)\n    b_percentage = (df['close'] - lower_band) / (upper_band - lower_band)\n    \n    # Combine PPO and %B into a single heuristic matrix\n    heuristics_matrix = 0.5 * ppo_line + 0.5 * (1 - b_percentage)\n    \n    return heuristics_matrix",
          "objective": -0.03909,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates a composite heuristic score by combining the relative strength index (RSI) with the moving average convergence divergence (MACD) and the Chaikin Money Flow (CMF) to assess momentum, trend, and money flow respectively.",
          "code": "def heuristics_v2(df):\n    # Calculate RSI\n    delta = df['close'].diff()\n    gain = (delta.where(delta > 0, 0)).rolling(window=14).mean()\n    loss = (-delta.where(delta < 0, 0)).rolling(window=14).mean()\n    rs = gain / loss\n    rsi = 100 - (100 / (1 + rs))\n    \n    # Calculate MACD\n    ema_12 = df['close'].ewm(span=12, adjust=False).mean()\n    ema_26 = df['close'].ewm(span=26, adjust=False).mean()\n    macd_line = ema_12 - ema_26\n    signal_line = macd_line.ewm(span=9, adjust=False).mean()\n    macd_hist = macd_line - signal_line\n    \n    # Calculate Chaikin Money Flow\n    mfm = ((df['close'] - df['low']) - (df['high'] - df['close'])) / (df['high'] - df['low'])\n    mf_volume = mfm * df['volume']\n    cmf = mf_volume.rolling(window=20).sum() / df['volume'].rolling(window=20).sum()\n    \n    # Combine RSI, MACD, and CMF into a single heuristic matrix\n    heuristics_matrix = 0.4 * rsi + 0.3 * macd_hist + 0.3 * cmf\n    \n    return heuristics_matrix",
          "objective": -0.0222,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm modifies the original approach by adjusting the EMA periods to 10 and 30, using a 30-day window for Bollinger Bands, and incorporating a 2.5 standard deviation for the bands, aiming to capture more pronounced trends and mean-reversion signals.",
          "code": "def heuristics_v2(df):\n    # Calculate the 10-period EMA and 30-period EMA\n    ema_10 = df['close'].ewm(span=10, adjust=False).mean()\n    ema_30 = df['close'].ewm(span=30, adjust=False).mean()\n    \n    # Calculate the Percentage Price Oscillator (PPO)\n    ppo_line = ((ema_10 - ema_30) / ema_30) * 100\n    \n    # Calculate Bollinger Bands\n    sma_30 = df['close'].rolling(window=30).mean()\n    std_30 = df['close'].rolling(window=30).std()\n    upper_band = sma_30 + (2.5 * std_30)\n    lower_band = sma_30 - (2.5 * std_30)\n    \n    # Calculate the %B indicator (position within Bollinger Bands)\n    b_percentage = (df['close'] - lower_band) / (upper_band - lower_band)\n    \n    # Combine PPO and %B into a single heuristic matrix\n    heuristics_matrix = 0.6 * ppo_line + 0.4 * (1 - b_percentage)\n    \n    return heuristics_matrix",
          "objective": -0.01972,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm adjusts the PPO and Bollinger Bands parameters, using a 9-period and 21-period EMA for PPO calculation and a 15-day window with 3 standard deviations for Bollinger Bands, to generate a signal aimed at predicting future stock returns.",
          "code": "def heuristics_v2(df):\n    # Calculate the 9-period EMA and 21-period EMA\n    ema_9 = df['close'].ewm(span=9, adjust=False).mean()\n    ema_21 = df['close'].ewm(span=21, adjust=False).mean()\n    \n    # Calculate the Percentage Price Oscillator (PPO)\n    ppo_line = ((ema_9 - ema_21) / ema_21) * 100\n    \n    # Calculate Bollinger Bands\n    sma_15 = df['close'].rolling(window=15).mean()\n    std_15 = df['close'].rolling(window=15).std()\n    upper_band = sma_15 + (3 * std_15)\n    lower_band = sma_15 - (3 * std_15)\n    \n    # Calculate the %B indicator (position within Bollinger Bands)\n    b_percentage = (df['close'] - lower_band) / (upper_band - lower_band)\n    \n    # Combine PPO and %B into a single heuristic matrix\n    heuristics_matrix = 0.5 * ppo_line + 0.5 * (1 - b_percentage)\n    \n    return heuristics_matrix",
          "objective": -0.01951,
          "other_inf": null
     }
]