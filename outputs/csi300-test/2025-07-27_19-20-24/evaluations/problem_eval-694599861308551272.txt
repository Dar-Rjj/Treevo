import pandas as pd
import ta

def heuristics_v2(df):
    # Calculate EMA (Exponential Moving Average) for 10 days as a momentum indicator
    ema_10 = df['close'].ewm(span=10, adjust=False).mean()
    roc_ema = (df['close'] - ema_10) / ema_10
    
    # Calculate ATR (Average True Range) for 14 days as a volatility indicator
    atr_14 = ta.volatility.average_true_range(df['high'], df['low'], df['close'], window=14)
    
    # Calculate the ratio of current volume to the average volume over 20 days as a liquidity indicator
    avg_vol_20 = df['volume'].rolling(window=20).mean()
    vol_ratio = df['volume'] / avg_vol_20
    
    # Create a composite heuristic
    heuristics_matrix = (roc_ema + atr_14 + vol_ratio) / 3
    
    return heuristics_matrix
