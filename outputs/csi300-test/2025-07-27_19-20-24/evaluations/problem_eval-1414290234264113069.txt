import pandas as pd
    import numpy as np

    # Calculate 5-day cumulative return
    daily_return = df['close'].pct_change()
    cum_return_5d = (1 + daily_return).rolling(window=5).apply(np.prod, raw=True) - 1
    
    # Calculate Average True Range (ATR) over the past 20 days
    tr = df[['high', 'low', 'close']].join(df['close'].shift(1), rsuffix='_prev').apply(lambda x: max(x[0] - x[1], abs(x[0] - x[2]), abs(x[1] - x[2])), axis=1)
    atr_20d = tr.rolling(window=20).mean()
    
    # Calculate the heuristics matrix
    heuristics_matrix = cum_return_5d / atr_20d
    return heuristics_matrix
