```python
import pandas as pd
import numpy as np

def heuristics_v2(df, N=5, M=10):
    # Calculate Intraday and Breakout Price Movements
    intraday_movement = df['high'] - df['low']
    breakout_momentum = (df['high'] - df['low']) / df['close'].shift(1)
    
    # Adjust by Volume and Amount
    volume_weighted_intraday = intraday_movement * df['volume']
    cumulative_volume = df['volume'].rolling(window=N).sum()
    volume_adjusted_breakout = breakout_momentum / cumulative_volume
    
    amount_weighted_intraday = intraday_movement * df['amount']
    cumulative_amount = df['amount'].rolling(window=N).sum()
    amount_adjusted_breakout = breakout_momentum / cumulative_amount
    
    # Incorporate Opening Trend and Amount Impact
    opening_trend = df['open'] - df['close'].shift(1)
    amount_weighted_opening_trend = opening_trend * df['amount']
    
    combined_movements = (
        volume_weighted_intraday +
        volume_adjusted_breakout +
        amount_weighted_intraday +
        amount_adjusted_breakout +
        amount_weighted_opening_trend
    )
    
    # Incorporate Trend Strength
    short_ema = df['close'].ewm(span=12, adjust=False).mean()
    long_ema = df['close'].ewm(span=26, adjust=False).mean()
    macd = short_ema - long_ema
    
    trend_adjusted_combined = combined_movements * macd
    
    # Calculate Moving Averages
    ma_volume_weighted_intraday = volume_weighted_intraday.rolling(window=5).mean()
    ma_amount_weighted_intraday = amount_weighted_intraday.rolling(window=5).mean()
    ma_amount_weighted_opening_trend = amount_weighted_opening_trend.rolling(window=5).mean()
    
    # Aggregate and Adjust Momentum
    aggregated_momentum = trend_adjusted_combined.rolling(window=M).sum()
    adjusted_momentum = (
        aggregated_momentum -
        ma_volume_weighted_intraday -
        ma_amount_weighted_intraday -
        ma_amount_weighted_opening_trend
    )
    
    return adjusted_momentum
```
