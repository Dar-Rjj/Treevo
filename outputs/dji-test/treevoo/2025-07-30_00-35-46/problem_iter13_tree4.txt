```txt
Intraday Activity and Momentum with Volume and Amount Shock Filter
├── Calculate Intraday Range
│   ├── Subtract Low from High to get Range
├── Measure Close Position in Range
│   ├── Ensure Range is non-zero before division
│   ├── Calculate (Close - Low) / (High - Low)
├── Calculate Volume-Weighted Average Price (VWAP)
│   ├── Sum of (Open * Volume, High * Volume, Low * Volume, Close * Volume)
│   └── Divide by sum of Volumes
├── Calculate Intraday Momentum
│   ├── Compute High-Low Difference
│   │   ├── Use High price
│   │   └── Use Low price
│   ├── Compute Open-Close Return
│   │   ├── Use Open price
│   │   └── Use Close price
│   └── Weighted Average of High-Low Difference and Open-Close Return
│       ├── Assign Weight to High-Low Difference
│       └── Assign Weight to Open-Close Return
├── Apply Volume and Amount Shock Filter
│   ├── Compute Volume Ratio
│   │   ├── Current Volume / Previous Day Volume
│   ├── Compute Amount Ratio
│   │   ├── Current Amount / Previous Day Amount
│   └── Include Intraday Momentum if (Volume Ratio > 1.5) AND (Amount Ratio > 1.5)
└── Combine Factors
    ├── Use Intraday Range
    ├── Use Close Position in Range
    ├── Use VWAP
    ├── Use Filtered Intraday Momentum
    └── Compute weighted average of the four factors
        ├── For Intraday Range, compute recent standard deviation
        ├── For Close Position in Range, compute recent standard deviation
        ├── For VWAP, compute recent standard deviation
        └── For Filtered Intraday Momentum, compute recent standard deviation
        └── Assign weights inversely proportional to the standard deviations
```
