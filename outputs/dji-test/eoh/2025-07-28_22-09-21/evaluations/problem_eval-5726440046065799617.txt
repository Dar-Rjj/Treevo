import pandas as pd

def heuristics_v2(df):
    short_window = 10
    long_window = 50
    rsi_window = 14
    
    # Calculate Short and Long Moving Averages
    df['SMA_Short'] = df['close'].rolling(window=short_window, min_periods=1).mean()
    df['SMA_Long'] = df['close'].rolling(window=long_window, min_periods=1).mean()
    
    # Calculate Daily Price Change
    delta = df['close'].diff(1)
    
    # Make two series: one for lower closes and one for higher closes
    up, down = delta.copy(), delta.copy()
    up[up < 0] = 0
    down[down > 0] = 0
    
    # Calculate Average Gain and Loss
    avg_gain = up.rolling(window=rsi_window, min_periods=1).mean()
    avg_loss = abs(down.rolling(window=rsi_window, min_periods=1).mean())
    
    # Calculate Relative Strength (RS) and RSI
    rs = avg_gain / avg_loss
    rsi = 100.0 - (100.0 / (1.0 + rs))
    
    # Define Heuristic Factor
    heuristics_matrix = (df['SMA_Short'] - df['SMA_Long']) * rsi
    
    return heuristics_matrix
