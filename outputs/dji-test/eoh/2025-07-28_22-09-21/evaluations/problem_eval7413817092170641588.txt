def heuristics_v2(df):
    df['macd_line'] = df['close'].ewm(span=12, adjust=False).mean() - df['close'].ewm(span=26, adjust=False).mean()
    df['signal_line'] = df['macd_line'].ewm(span=9, adjust=False).mean()
    df['rs'] = df['close'].rolling(window=20).apply(lambda x: (x[-1] / x[0]) - 1)
    df['atr'] = ((df['high'] - df['low']).abs() + (df['high'] - df['close'].shift()).abs() + (df['low'] - df['close'].shift()).abs()) / 3
    df['atr_10'] = df['atr'].rolling(window=10).mean()
    heuristics_matrix = (df['macd_line'] - df['signal_line']) * df['rs'] / df['atr_10']
    return heuristics_matrix
