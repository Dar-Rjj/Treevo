import pandas as pd

def heuristics_v2(df):
    # Calculate the average of high and low prices
    avg_high_low = (df['high'] + df['low']) / 2
    
    # Calculate the ratio of the closing price to the average of high and low prices
    price_ratio = df['close'] / avg_high_low
    
    # Apply a 20-day Simple Moving Average (SMA) to the price ratio
    heuristics_matrix = price_ratio.rolling(window=20).mean()
    
    return heuristics_matrix
