def heuristics_v2(df):
    # Calculate the 21-period Rate of Change (ROC) for the close price
    roc_close = df['close'].pct_change(periods=21)
    
    # Calculate the 21-period Simple Moving Average (SMA) of the volume
    sma_volume = df['volume'].rolling(window=21).mean()
    
    # Calculate the 21-period Exponential Moving Average (EMA) of the true range
    df['tr'] = df[['high', 'low']].diff(axis=1).abs().max(axis=1)
    ema_tr = df['tr'].ewm(span=21, adjust=False).mean()
    
    # Heuristic combination: Weighted sum of ROC, SMA of volume, and EMA of true range
    heuristics_matrix = 0.5 * roc_close + 0.3 * sma_volume + 0.2 * ema_tr
    return heuristics_matrix
