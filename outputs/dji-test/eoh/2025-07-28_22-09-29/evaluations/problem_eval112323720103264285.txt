import pandas as pd

def heuristics_v2(df):
    price_change = df['close'].pct_change()
    volume_change = df['volume'].pct_change()
    volatility = df['close'].rolling(window=20).std()
    
    # Calculate smoothed volatility
    smooth_volatility = volatility.ewm(span=20, adjust=False).mean()
    
    # Generate dynamic weights
    weight_price = 1 / (1 + smooth_volatility)
    weight_volume = 1 - weight_price
    
    # Compute the heuristic score
    heuristics_matrix = (price_change * weight_price) + (volume_change * weight_volume)
    
    return heuristics_matrix
