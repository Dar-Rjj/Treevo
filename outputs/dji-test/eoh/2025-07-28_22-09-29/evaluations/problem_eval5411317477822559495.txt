def heuristics_v2(df):
    # Calculate Average True Range (ATR)
    df['H-L'] = df['high'] - df['low']
    df['H-PC'] = abs(df['high'] - df['close'].shift(1))
    df['L-PC'] = abs(df['low'] - df['close'].shift(1))
    df['TR'] = df[['H-L', 'H-PC', 'L-PC']].max(axis=1, skipna=False)
    df['ATR'] = df['TR'].rolling(window=14).mean()
    
    # Calculate 5-day Simple Moving Average of the close price
    df['SMA_5'] = df['close'].rolling(window=5).mean()
    
    # Calculate the difference between today's close and 10-day minimum of close
    df['Min_10D'] = df['close'].rolling(window=10).min()
    df['Price_Diff'] = df['close'] - df['Min_10D']
    
    # Generate the heuristics factor
    df['Heuristic_Factor'] = (df['ATR'] / df['SMA_5']) * df['Price_Diff']
    
    heuristics_matrix = df['Heuristic_Factor'].dropna()
    return heuristics_matrix
