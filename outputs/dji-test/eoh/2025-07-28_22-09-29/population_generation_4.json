[
     {
          "algorithm": "The new algorithm calculates a composite factor by combining the difference between the exponential moving averages (EMA) of the closing price with the relative strength index (RSI) of the volume, and then adjusts this combined value using a rolling mean instead of a rolling median to generate a smoothed and interpretable heuristic factor.",
          "code": "def heuristics_v2(df):\n    def ema_diff(price, fast=10, slow=30):\n        ema_fast = price.ewm(span=fast, adjust=False).mean()\n        ema_slow = price.ewm(span=slow, adjust=False).mean()\n        return ema_fast - ema_slow\n\n    def rsi(series, periods=14):\n        delta = series.diff(1)\n        gain = (delta.where(delta > 0, 0)).rolling(window=periods).mean()\n        loss = (-delta.where(delta < 0, 0)).rolling(window=periods).mean()\n        rs = gain / loss\n        return 100 - (100 / (1 + rs))\n\n    ema_signal = ema_diff(df['close'])\n    rsi_volume = rsi(df['volume'])\n    combined_factor = (ema_signal + rsi_volume).rename('combined_factor')\n    heuristics_matrix = combined_factor.rolling(window=20).mean().rename('heuristic_factor')\n\n    return heuristics_matrix",
          "objective": -0.04065,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates a composite factor by combining the difference between the exponential moving averages (EMA) of the closing price with the relative strength index (RSI) of the volume, then adjusting this combined value using a rolling median to generate a smoothed and interpretable heuristic factor.",
          "code": "def heuristics_v2(df):\n    def ema_diff(price, fast=10, slow=30):\n        ema_fast = price.ewm(span=fast, adjust=False).mean()\n        ema_slow = price.ewm(span=slow, adjust=False).mean()\n        return ema_fast - ema_slow\n\n    def rsi(series, periods=14):\n        delta = series.diff(1)\n        gain = (delta.where(delta > 0, 0)).rolling(window=periods).mean()\n        loss = (-delta.where(delta < 0, 0)).rolling(window=periods).mean()\n        rs = gain / loss\n        return 100 - (100 / (1 + rs))\n\n    ema_signal = ema_diff(df['close'])\n    rsi_volume = rsi(df['volume'])\n    combined_factor = (ema_signal + rsi_volume).rename('combined_factor')\n    heuristics_matrix = combined_factor.rolling(window=20).median().rename('heuristic_factor')\n\n    return heuristics_matrix",
          "objective": -0.04026,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates a composite factor by combining the difference between the exponential moving averages (EMA) of the closing price with the normalized volume, then adjusting this combined value using a rolling mean to generate a smoothed and interpretable heuristic factor.",
          "code": "def heuristics_v2(df):\n    def ema_diff(price, fast=10, slow=30):\n        ema_fast = price.ewm(span=fast, adjust=False).mean()\n        ema_slow = price.ewm(span=slow, adjust=False).mean()\n        return ema_fast - ema_slow\n\n    def normalize_volume(volume, periods=14):\n        return (volume - volume.rolling(window=periods).mean()) / volume.rolling(window=periods).std()\n\n    ema_signal = ema_diff(df['close'])\n    norm_volume = normalize_volume(df['volume'])\n    combined_factor = (ema_signal + norm_volume).rename('combined_factor')\n    heuristics_matrix = combined_factor.rolling(window=20).mean().rename('heuristic_factor')\n\n    return heuristics_matrix",
          "objective": -0.03852,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm combines the momentum measured by the difference between the fast and slow exponential moving averages of the closing price with a volatility measure derived from the Bollinger Bands width, smoothed using a rolling weighted average to form an interpretable heuristic factor.",
          "code": "def heuristics_v2(df):\n    def ema_diff(price, fast=10, slow=50):\n        ema_fast = price.ewm(span=fast, adjust=False).mean()\n        ema_slow = price.ewm(span=slow, adjust=False).mean()\n        return ema_fast - ema_slow\n\n    def bollinger_width(price, window=20, n_std=2):\n        rolling_mean = price.rolling(window=window).mean()\n        rolling_std = price.rolling(window=window).std()\n        upper_band = rolling_mean + (rolling_std * n_std)\n        lower_band = rolling_mean - (rolling_std * n_std)\n        return (upper_band - lower_band) / rolling_mean\n\n    ema_signal = ema_diff(df['close'])\n    bb_width = bollinger_width(df['close'])\n    combined_factor = (ema_signal + bb_width).rename('combined_factor')\n    heuristics_matrix = combined_factor.ewm(span=30, adjust=False).mean().rename('heuristic_factor')\n\n    return heuristics_matrix",
          "objective": -0.03815,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm computes a composite factor by combining the difference between the fast (10 days) and slow (50 days) exponential moving averages of the closing price with the rate of change (ROC) over 20 periods of the high price, then applies a weighted moving average (window=30, weights=[1,2,3,...,30]) to smooth this composite value, producing an interpretable heuristic factor.",
          "code": "import pandas as pd\nimport numpy as np\n\ndef heuristics_v2(df):\n    def ema_diff(price, fast=10, slow=50):\n        ema_fast = price.ewm(span=fast, adjust=False).mean()\n        ema_slow = price.ewm(span=slow, adjust=False).mean()\n        return ema_fast - ema_slow\n\n    def roc(series, periods=20):\n        return series.pct_change(periods=periods)\n\n    def weighted_moving_average(series, window=30):\n        weights = np.arange(1, window + 1)\n        return series.rolling(window=window).apply(lambda x: (x * weights).sum() / weights.sum(), raw=True)\n\n    ema_signal = ema_diff(df['close'])\n    roc_high = roc(df['high'])\n    combined_factor = (ema_signal + roc_high).rename('combined_factor')\n    heuristics_matrix = weighted_moving_average(combined_factor).rename('heuristic_factor')\n\n    return heuristics_matrix",
          "objective": -0.038,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm computes a composite factor by combining the difference between the fast (10 days) and slow (50 days) exponential moving averages of the closing price with the rate of change (ROC) over 20 periods of the low price, then smoothing this composite value using a simple moving average (window=30) to produce an interpretable heuristic factor.",
          "code": "def heuristics_v2(df):\n    def ema_diff(price, fast=10, slow=50):\n        ema_fast = price.ewm(span=fast, adjust=False).mean()\n        ema_slow = price.ewm(span=slow, adjust=False).mean()\n        return ema_fast - ema_slow\n\n    def roc(series, periods=20):\n        return series.pct_change(periods=periods)\n\n    ema_signal = ema_diff(df['close'])\n    roc_low = roc(df['low'])\n    combined_factor = (ema_signal + roc_low).rename('combined_factor')\n    heuristics_matrix = combined_factor.rolling(window=30).mean().rename('heuristic_factor')\n\n    return heuristics_matrix",
          "objective": -0.03797,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates the momentum using the difference between two exponential moving averages (EMA) of the closing prices, incorporates a volatility measure by calculating the standard deviation of the closing prices, and then smooths the combination of these two measures with a rolling average to form an enhanced heuristic factor.",
          "code": "def heuristics_v2(df):\n    def ema_diff(price, fast=10, slow=50):\n        ema_fast = price.ewm(span=fast, adjust=False).mean()\n        ema_slow = price.ewm(span=slow, adjust=False).mean()\n        return ema_fast - ema_slow\n\n    def close_std(price, window=20):\n        rolling_std = price.rolling(window=window).std()\n        return rolling_std / price\n\n    ema_signal = ema_diff(df['close'])\n    std_signal = close_std(df['close'])\n    combined_factor = (ema_signal + std_signal).rename('combined_factor')\n    heuristics_matrix = combined_factor.rolling(window=30).mean().rename('heuristic_factor')\n\n    return heuristics_matrix",
          "objective": -0.03793,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates a composite factor by combining the difference between the exponential moving averages of the closing price with the rate of change of the low price, then smoothes this combined value using a simple moving average, employing different parameter settings for smoothing and EMA.",
          "code": "def heuristics_v2(df):\n    def ema_diff(price, fast=15, slow=45):\n        ema_fast = price.ewm(span=fast, adjust=False).mean()\n        ema_slow = price.ewm(span=slow, adjust=False).mean()\n        return ema_fast - ema_slow\n\n    def roc(series, periods=30):\n        return (series - series.shift(periods)) / series.shift(periods)\n\n    ema_signal = ema_diff(df['close'])\n    roc_low = roc(df['low'])\n    combined_factor = (ema_signal + roc_low).rename('combined_factor')\n    heuristics_matrix = combined_factor.rolling(window=30).mean().rename('heuristic_factor')\n\n    return heuristics_matrix",
          "objective": -0.03762,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm computes a composite factor by integrating the difference between the exponential moving averages of the closing price (EMA Difference) with the rate of change (ROC) of the high price, then smoothes this combined value using a simple moving average to generate an enhanced heuristic factor.",
          "code": "def heuristics_v2(df):\n    def ema_diff(price, fast=10, slow=30):\n        ema_fast = price.ewm(span=fast, adjust=False).mean()\n        ema_slow = price.ewm(span=slow, adjust=False).mean()\n        return ema_fast - ema_slow\n\n    def roc(series, periods=20):\n        return (series - series.shift(periods)) / series.shift(periods)\n\n    ema_signal = ema_diff(df['close'])\n    roc_high = roc(df['high'])\n    combined_factor = (ema_signal + roc_high).rename('combined_factor')\n    heuristics_matrix = combined_factor.rolling(window=20).mean().rename('heuristic_factor')\n\n    return heuristics_matrix",
          "objective": -0.03732,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates a composite factor by combining the difference between the exponential moving averages (EMA) of the closing price with the rate of change (ROC) of the volume, then adjusting this combined value using a rolling mean to generate a smoothed and interpretable heuristic factor.",
          "code": "def heuristics_v2(df):\n    def ema_diff(price, fast=10, slow=30):\n        ema_fast = price.ewm(span=fast, adjust=False).mean()\n        ema_slow = price.ewm(span=slow, adjust=False).mean()\n        return ema_fast - ema_slow\n\n    def roc(series, periods=14):\n        return series.pct_change(periods)\n\n    ema_signal = ema_diff(df['close'])\n    roc_volume = roc(df['volume'])\n    combined_factor = (ema_signal + roc_volume).rename('combined_factor')\n    heuristics_matrix = combined_factor.rolling(window=20).mean().rename('heuristic_factor')\n\n    return heuristics_matrix",
          "objective": -0.03699,
          "other_inf": null
     }
]