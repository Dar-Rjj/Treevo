import pandas as pd

def heuristics_v2(df):
    # Calculate MACD
    exp1 = df['close'].ewm(span=12, adjust=False).mean()
    exp2 = df['close'].ewm(span=26, adjust=False).mean()
    macd = exp1 - exp2
    signal = macd.ewm(span=9, adjust=False).mean()
    macd_diff = macd - signal
    
    # Calculate weighted sum of the last 5 days' closing prices
    weights = [0.15, 0.2, 0.25, 0.3, 0.1]
    weighted_sum = df['close'].rolling(window=len(weights)).apply(lambda x: (x * weights).sum(), raw=True)
    
    # Combine MACD and weighted sum for the final heuristic
    heuristics_matrix = macd_diff + weighted_sum.shift(1)
    return heuristics_matrix
