```python
def heuristics_v2(df: pd.DataFrame) -> pd.Series:
    # Calculate the daily return
    daily_return = df['close'].pct_change().fillna(0)
    
    # Calculate the 10-day and 30-day standard deviation of daily returns for short and medium-term volatility
    short_term_volatility = daily_return.rolling(window=10).std()
    medium_term_volatility = daily_return.rolling(window=30).std()
    
    # Calculate short-term momentum as the 10-day cumulative return
    short_term_momentum = (df['close'] / df['close'].shift(10)) - 1
    
    # Calculate medium-term momentum as the 30-day cumulative return
    medium_term_momentum = (df['close'] / df['close'].shift(30)) - 1
    
    # Calculate long-term trend by comparing today's close with the 200-day moving average
    long_term_trend = df['close'] / df['close'].rolling(window=200).mean() - 1
    
    # Calculate exponential smoothing for the close price to add stability
    exp_smoothing = df['close'].ewm(span=5).mean()
    
    # Calculate market sentiment using the ratio of volume to the 10-day and 30-day average volume
    short_term_volume_ratio = df['volume'] / df['volume'].rolling(window=10).mean()
    medium_term_volume_ratio = df['volume'] / df['volume'].rolling(window=30).mean()
    
    # Combine the short-term, medium-term, and long-term factors
    factor = (short_term_momentum * 0.2 + medium_term_momentum * 0.2 + long_term_trend * 0.2 
              + short_term_volume_ratio * 0.15 + medium_term_volume_ratio * 0.15) - (short_term_volatility * 0.05 + medium_term_volatility * 0.05)
    
    return factor
```
