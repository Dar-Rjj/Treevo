import pandas as pd

def heuristics_v2(df):
    def calculate_momentum(column, n):
        return column - column.shift(n)

    # Calculate 20-day momentum
    momentum = calculate_momentum(df['close'], 20)
    
    # Calculate VWAP
    tp = (df['high'] + df['low'] + df['close']) / 3
    vwap = (df['volume'] * tp).cumsum() / df['volume'].cumsum()
    
    # Calculate 5-day EMA of VWAP
    vwap_ema5 = vwap.ewm(span=5, adjust=False).mean()
    
    # Calculate 10-day WMA of the closing price
    weights = pd.Series(range(1, 11), index=range(10, 0, -1))
    wma10 = df['close'].rolling(window=10).apply(lambda x: (x * weights).sum() / weights.sum(), raw=True)
    
    # Combine factors
    heuristics_matrix = momentum + (vwap_ema5 - wma10)
    
    return heuristics_matrix
