def heuristics_v2(df):
    # Calculate the 20-day percentage change in the closing price
    pct_change_20 = df['close'].pct_change(periods=20)
    
    # Calculate the highest high and lowest low over the last 20 days
    rolling_high = df['high'].rolling(window=20).max()
    rolling_low = df['low'].rolling(window=20).min()
    
    # Calculate the ratio of the highest high to the lowest low
    hl_ratio = rolling_high / rolling_low
    
    # Apply a custom heuristic to combine the 20-day percentage change and the high-low ratio
    heuristics_matrix = (pct_change_20 + hl_ratio).rank(pct=True)
    
    return heuristics_matrix
