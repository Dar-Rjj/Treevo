def heuristics_v2(df):
    # Calculate the rate of change (ROC) over a 21-day period
    roc = df['close'].pct_change(periods=21)
    
    # Calculate the average true range (ATR) over a 20-day period
    tr = df[['high', 'low']].diff().abs().max(axis=1)
    atr = tr.rolling(window=20).mean()
    
    # Apply a custom heuristic to combine the ROC and ATR
    heuristics_matrix = (roc - atr)
    
    return heuristics_matrix
