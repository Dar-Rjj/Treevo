def heuristics_v2(df):
    # Calculate the 50-day and 200-day Simple Moving Averages (SMA)
    sma_50 = df['close'].rolling(window=50).mean()
    sma_200 = df['close'].rolling(window=200).mean()
    
    # Calculate the 10-day and 30-day Average True Range (ATR)
    tr = df[['high', 'low', 'close']].apply(lambda x: max(x[0], x[1]) - min(x[0], x[1]), axis=1)
    atr_10 = tr.rolling(window=10).mean()
    atr_30 = tr.rolling(window=30).mean()
    
    # Compute the difference between 50-day and 200-day SMAs
    sma_diff = sma_50 - sma_200
    
    # Compute the ratio between 10-day and 30-day ATRs
    atr_ratio = atr_10 / atr_30
    
    # Apply a custom heuristic to combine the SMA difference and ATR ratio
    heuristics_matrix = (sma_diff + atr_ratio).rank(pct=True)
    
    return heuristics_matrix
