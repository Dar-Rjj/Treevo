import pandas as pd

def heuristics_v2(df):
    # Calculate the Bollinger Bands
    sma = df['close'].rolling(window=20).mean()
    std_dev = df['close'].rolling(window=20).std()
    upper_band = sma + 2 * std_dev
    lower_band = sma - 2 * std_dev
    
    # Calculate the percentage bandwidth
    bb_percentage = (df['close'] - lower_band) / (upper_band - lower_band)
    
    # Calculate the volume weighted average price (VWAP)
    vwap = (df['volume'] * (df['high'] + df['low'] + df['close']) / 3).cumsum() / df['volume'].cumsum()
    
    # Calculate the ratio of VWAP to close price
    vwap_ratio = vwap / df['close']
    
    # Combine the BB percentage and VWAP ratio
    heuristics_matrix = bb_percentage + vwap_ratio
    
    return heuristics_matrix
