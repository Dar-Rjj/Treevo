def heuristics_v2(df):
    # Calculate RSI
    delta = df['close'].diff()
    gain = (delta.where(delta > 0, 0)).rolling(window=14).mean()
    loss = (-delta.where(delta < 0, 0)).rolling(window=14).mean()
    rs = gain / loss
    rsi = 100 - (100 / (1 + rs))
    
    # Calculate ADX
    high = df['high']
    low = df['low']
    close = df['close']
    tr = pd.Series(dtype='float64')
    for i in range(1, len(close)):
        hl = high[i] - low[i]
        hcy = abs(high[i] - close[i-1])
        lcy = abs(low[i] - close[i-1])
        tr[i] = max(hl, hcy, lcy)
    atr = tr.rolling(window=14).mean()

    plus_dm = (high.diff() > 0).astype(int)
    minus_dm = -(low.diff() < 0).astype(int)
    smooth_plus_dm = plus_dm.rolling(window=14).mean()
    smooth_minus_dm = minus_dm.rolling(window=14).mean()
    plus_di = 100 * (smooth_plus_dm / atr)
    minus_di = 100 * (smooth_minus_dm / atr)
    dx = 100 * (abs(plus_di - minus_di) / (plus_di + minus_di))
    adx = dx.rolling(window=14).mean()

    # Combine RSI and ADX into a single heuristic factor
    heuristics_matrix = 0.5 * rsi + 0.5 * adx

    return heuristics_matrix
