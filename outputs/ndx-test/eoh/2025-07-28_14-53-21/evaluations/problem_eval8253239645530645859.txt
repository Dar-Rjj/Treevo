def heuristics_v2(df):
    # Calculate Rate of Change (ROC)
    roc = df['close'].pct_change(periods=14)

    # Calculate True Range (TR)
    tr1 = df['high'] - df['low']
    tr2 = abs(df['high'] - df['close'].shift(1))
    tr3 = abs(df['low'] - df['close'].shift(1))
    true_range = pd.concat([tr1, tr2, tr3], axis=1).max(axis=1)

    # Calculate Average True Range (ATR)
    atr = true_range.rolling(window=14).mean()

    # Calculate +DM and -DM
    plus_dm = df['high'].diff(1)
    minus_dm = df['low'].diff(1)
    plus_dm[plus_dm < 0] = 0
    minus_dm[minus_dm < 0] = 0
    plus_dm[(df['high'] - df['high'].shift(1)) < (df['low'].shift(1) - df['low'])] = 0
    minus_dm[(df['low'].shift(1) - df['low']) < (df['high'] - df['high'].shift(1))] = 0

    # Calculate +DI and -DI
    plus_di = 100 * (plus_dm.rolling(window=14).sum() / atr)
    minus_di = 100 * (minus_dm.rolling(window=14).sum() / atr)

    # Calculate Smoothed Momentum
    momentum = df['close'] - df['close'].shift(10)
    smoothed_momentum = momentum.ewm(span=5, adjust=False).mean()

    # Combine ROC, PDI, NDI, and smoothed momentum into a single heuristic factor
    heuristics_matrix = roc + plus_di - minus_di + smoothed_momentum

    return heuristics_matrix
