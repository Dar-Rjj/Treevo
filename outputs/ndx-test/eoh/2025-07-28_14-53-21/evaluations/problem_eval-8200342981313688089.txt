import pandas as pd
    # Calculate Chaikin Money Flow
    money_flow_multiplier = ((df['close'] - df['low']) - (df['high'] - df['close'])) / (df['high'] - df['low'])
    money_flow_volume = money_flow_multiplier * df['volume']
    cmf = money_flow_volume.rolling(window=20).sum() / df['volume'].rolling(window=20).sum()

    # Calculate Bollinger Bandwidth
    sma_50 = df['close'].rolling(window=50).mean()
    std_50 = df['close'].rolling(window=50).std()
    upper_band = sma_50 + 2 * std_50
    lower_band = sma_50 - 2 * std_50
    bollinger_bandwidth = (upper_band - lower_band) / sma_50

    # Calculate Trend Strength Indicator (Linear Regression Slope)
    trend_strength = df['close'].rolling(window=100).apply(lambda x: np.polyfit(range(100), x, 1)[0], raw=True)

    # Combine all factors into a single heuristic factor
    heuristics_matrix = cmf + bollinger_bandwidth + trend_strength

    return heuristics_matrix
