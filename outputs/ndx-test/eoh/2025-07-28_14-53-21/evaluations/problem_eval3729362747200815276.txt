import pandas as pd

def heuristics_v2(df):
    def calculate_volatility(series, window):
        return series.rolling(window=window).std()

    short_window = 10
    medium_window = 30
    long_window = 90
    
    # Calculate moving averages
    short_ma = df['close'].rolling(window=short_window).mean()
    medium_ma = df['close'].rolling(window=medium_window).mean()
    long_ma = df['close'].rolling(window=long_window).mean()
    
    # Calculate volatilities
    short_vol = calculate_volatility(df['close'], short_window)
    medium_vol = calculate_volatility(df['close'], medium_window)
    long_vol = calculate_volatility(df['close'], long_window)

    # Compute the heuristics
    heuristics_matrix = (short_ma * 0.4 + medium_ma * 0.3 + long_ma * 0.1) - (short_vol * 0.1 + medium_vol * 0.1 + long_vol * 0.05)
    
    return heuristics_matrix
