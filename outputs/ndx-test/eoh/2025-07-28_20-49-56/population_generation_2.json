[
     {
          "algorithm": "The new algorithm combines the volatility measured by the Average True Range (ATR) and the Money Flow Index (MFI) to assess both price volatility and money flow, generating a composite signal.",
          "code": "import pandas as pd\n\ndef heuristics_v2(df):\n    # Calculate the Average True Range (ATR) for a 14-day period\n    df['H-L'] = abs(df['high'] - df['low'])\n    df['H-PC'] = abs(df['high'] - df['close'].shift(1))\n    df['L-PC'] = abs(df['low'] - df['close'].shift(1))\n    df['TR'] = df[['H-L', 'H-PC', 'L-PC']].max(axis=1)\n    atr = df['TR'].rolling(window=14).mean()\n    \n    # Calculate the Money Flow Index (MFI) for a 14-day period\n    typical_price = (df['high'] + df['low'] + df['close']) / 3\n    money_flow = typical_price * df['volume']\n    positive_money_flow = money_flow.where(typical_price > typical_price.shift(1), 0)\n    negative_money_flow = money_flow.where(typical_price < typical_price.shift(1), 0)\n    mfi_ratio = positive_money_flow.rolling(window=14).sum() / negative_money_flow.rolling(window=14).sum()\n    mfi = 100 - (100 / (1 + mfi_ratio))\n    \n    # Combine ATR and MFI into a single heuristic measure\n    heuristics_matrix = (atr + mfi) / 2\n    \n    return heuristics_matrix",
          "objective": -0.0271,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates an alpha factor by weighting the PPO and MFI differently, using a 0.7 weight for PPO and 0.3 for MFI, to emphasize momentum over buying/selling pressure.",
          "code": "import pandas as pd\n\ndef heuristics_v2(df):\n    # Calculate the Percentage Price Oscillator (PPO)\n    short_term_ema = df['close'].ewm(span=12, adjust=False).mean()\n    long_term_ema = df['close'].ewm(span=26, adjust=False).mean()\n    ppo_line = ((short_term_ema - long_term_ema) / long_term_ema) * 100\n    \n    # Calculate the Money Flow Index (MFI)\n    typical_price = (df['high'] + df['low'] + df['close']) / 3\n    money_flow = typical_price * df['volume']\n    positive_money_flow = money_flow.where(typical_price > typical_price.shift(1), 0)\n    negative_money_flow = money_flow.where(typical_price < typical_price.shift(1), 0)\n    mfi_ratio = positive_money_flow.rolling(window=14).sum() / negative_money_flow.rolling(window=14).sum()\n    mfi = 100 - (100 / (1 + mfi_ratio))\n    \n    # Combine PPO and MFI into a single heuristics measure with different weights\n    heuristics_matrix = (ppo_line * 0.7 + mfi * 0.3)\n    return heuristics_matrix",
          "objective": -0.02675,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm modifies the original by incorporating a weighted average of ATR and MFI, and also includes the relative strength index (RSI) to better capture price momentum.",
          "code": "import pandas as pd\n\ndef heuristics_v2(df):\n    # Calculate the Average True Range (ATR) for a 14-day period\n    df['H-L'] = abs(df['high'] - df['low'])\n    df['H-PC'] = abs(df['high'] - df['close'].shift(1))\n    df['L-PC'] = abs(df['low'] - df['close'].shift(1))\n    df['TR'] = df[['H-L', 'H-PC', 'L-PC']].max(axis=1)\n    atr = df['TR'].rolling(window=14).mean()\n    \n    # Calculate the Money Flow Index (MFI) for a 14-day period\n    typical_price = (df['high'] + df['low'] + df['close']) / 3\n    money_flow = typical_price * df['volume']\n    positive_money_flow = money_flow.where(typical_price > typical_price.shift(1), 0)\n    negative_money_flow = money_flow.where(typical_price < typical_price.shift(1), 0)\n    mfi_ratio = positive_money_flow.rolling(window=14).sum() / negative_money_flow.rolling(window=14).sum()\n    mfi = 100 - (100 / (1 + mfi_ratio))\n    \n    # Calculate the Relative Strength Index (RSI) for a 14-day period\n    delta = df['close'].diff()\n    gain = delta.where(delta > 0, 0)\n    loss = -delta.where(delta < 0, 0)\n    avg_gain = gain.rolling(window=14).mean()\n    avg_loss = loss.rolling(window=14).mean()\n    rs = avg_gain / avg_loss\n    rsi = 100 - (100 / (1 + rs))\n    \n    # Combine ATR, MFI, and RSI into a single heuristic measure with weights\n    heuristics_matrix = (0.4 * atr + 0.3 * mfi + 0.3 * rsi)\n    \n    return heuristics_matrix",
          "objective": -0.02585,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates an alpha factor by weighting the PPO and MFI differently, using a 0.6 weight for PPO and 0.4 for MFI, to slightly emphasize momentum over buying/selling pressure.",
          "code": "def heuristics_v2(df):\n    short_term_ema = df['close'].ewm(span=12, adjust=False).mean()\n    long_term_ema = df['close'].ewm(span=26, adjust=False).mean()\n    ppo_line = ((short_term_ema - long_term_ema) / long_term_ema) * 100\n    typical_price = (df['high'] + df['low'] + df['close']) / 3\n    money_flow = typical_price * df['volume']\n    positive_money_flow = money_flow.where(typical_price > typical_price.shift(1), 0)\n    negative_money_flow = money_flow.where(typical_price < typical_price.shift(1), 0)\n    mfi_ratio = positive_money_flow.rolling(window=14).sum() / negative_money_flow.rolling(window=14).sum()\n    mfi = 100 - (100 / (1 + mfi_ratio))\n    heuristics_matrix = (ppo_line * 0.6 + mfi * 0.4)\n    return heuristics_matrix",
          "objective": -0.02582,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates an alpha factor by combining the difference between 50-day and 200-day moving averages of the closing price with a modified RSI that is based on a 14-day window and uses the weighted average (with weights 0.2, 0.3, and 0.5 for high, low, and close prices respectively) instead of the simple average.",
          "code": "def heuristics_v2(df):\n    # Calculate short and long term moving averages for the closing price\n    short_term_ma = df['close'].rolling(window=50).mean()\n    long_term_ma = df['close'].rolling(window=200).mean()\n\n    # Calculate the modified RSI using the weighted average of high, low, and close prices\n    avg_price = df['high'] * 0.2 + df['low'] * 0.3 + df['close'] * 0.5\n    delta = avg_price.diff(1)\n    gain = (delta.where(delta > 0, 0)).rolling(window=14).mean()\n    loss = (-delta.where(delta < 0, 0)).rolling(window=14).mean()\n    rs = gain / loss\n    rsi = 100 - (100 / (1 + rs))\n\n    # Combine the MA difference and the modified RSI\n    ma_diff = short_term_ma - long_term_ma\n    heuristics_matrix = (ma_diff + rsi) / 2\n\n    return heuristics_matrix",
          "objective": -0.02513,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm computes an alpha factor by integrating the percentage price oscillator (PPO) with the money flow index (MFI) to capture both momentum and buying/selling pressure.",
          "code": "import pandas as pd\n\ndef heuristics_v2(df):\n    # Calculate the Percentage Price Oscillator (PPO)\n    short_term_ema = df['close'].ewm(span=12, adjust=False).mean()\n    long_term_ema = df['close'].ewm(span=26, adjust=False).mean()\n    ppo_line = ((short_term_ema - long_term_ema) / long_term_ema) * 100\n    \n    # Calculate the Money Flow Index (MFI)\n    typical_price = (df['high'] + df['low'] + df['close']) / 3\n    money_flow = typical_price * df['volume']\n    positive_money_flow = money_flow.where(typical_price > typical_price.shift(1), 0)\n    negative_money_flow = money_flow.where(typical_price < typical_price.shift(1), 0)\n    mfi_ratio = positive_money_flow.rolling(window=14).sum() / negative_money_flow.rolling(window=14).sum()\n    mfi = 100 - (100 / (1 + mfi_ratio))\n    \n    # Combine PPO and MFI into a single heuristics measure\n    heuristics_matrix = (ppo_line + mfi) / 2\n    return heuristics_matrix",
          "objective": -0.02507,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates an alpha factor by combining the difference between 30-day and 100-day moving averages of the closing price with a modified RSI that is based on a 28-day window and uses the weighted average (with weights 0.4, 0.2, and 0.4 for high, low, and close prices respectively) instead of the simple average.",
          "code": "def heuristics_v2(df):\n    # Calculate short and long term moving averages for the closing price\n    short_term_ma = df['close'].rolling(window=30).mean()\n    long_term_ma = df['close'].rolling(window=100).mean()\n\n    # Calculate the modified RSI using the weighted average of high, low, and close prices\n    avg_price = df['high'] * 0.4 + df['low'] * 0.2 + df['close'] * 0.4\n    delta = avg_price.diff(1)\n    gain = (delta.where(delta > 0, 0)).rolling(window=28).mean()\n    loss = (-delta.where(delta < 0, 0)).rolling(window=28).mean()\n    rs = gain / loss\n    rsi = 100 - (100 / (1 + rs))\n\n    # Combine the MA difference and the modified RSI\n    ma_diff = short_term_ma - long_term_ma\n    heuristics_matrix = (ma_diff + rsi) / 2\n\n    return heuristics_matrix",
          "objective": -0.02458,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm modifies the original by incorporating a weighted average of ATR and MFI, with weights determined by their relative standard deviations, to better capture market dynamics.",
          "code": "import pandas as pd\n\ndef heuristics_v2(df):\n    # Calculate the Average True Range (ATR) for a 14-day period\n    df['H-L'] = abs(df['high'] - df['low'])\n    df['H-PC'] = abs(df['high'] - df['close'].shift(1))\n    df['L-PC'] = abs(df['low'] - df['close'].shift(1))\n    df['TR'] = df[['H-L', 'H-PC', 'L-PC']].max(axis=1)\n    atr = df['TR'].rolling(window=14).mean()\n    \n    # Calculate the Money Flow Index (MFI) for a 14-day period\n    typical_price = (df['high'] + df['low'] + df['close']) / 3\n    money_flow = typical_price * df['volume']\n    positive_money_flow = money_flow.where(typical_price > typical_price.shift(1), 0)\n    negative_money_flow = money_flow.where(typical_price < typical_price.shift(1), 0)\n    mfi_ratio = positive_money_flow.rolling(window=14).sum() / negative_money_flow.rolling(window=14).sum()\n    mfi = 100 - (100 / (1 + mfi_ratio))\n    \n    # Compute the standard deviation of ATR and MFI\n    atr_std = atr.std()\n    mfi_std = mfi.std()\n    \n    # Calculate the weighting factors\n    total_std = atr_std + mfi_std\n    atr_weight = atr_std / total_std\n    mfi_weight = mfi_std / total_std\n    \n    # Combine ATR and MFI into a single heuristic measure using the computed weights\n    heuristics_matrix = (atr * atr_weight) + (mfi * mfi_weight)\n    \n    return heuristics_matrix",
          "objective": -0.02401,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm integrates the Average True Range (ATR) and the Relative Strength Index (RSI) to capture volatility and momentum, generating a composite signal for predicting future stock returns.",
          "code": "import pandas as pd\n\ndef heuristics_v2(df):\n    # Calculate the True Range\n    tr = df['high'] - df['low']\n    tr = pd.concat([tr, (df['close'].shift(1) - df['high']).abs(), (df['close'].shift(1) - df['low']).abs()], axis=1).max(axis=1)\n    \n    # Calculate the Average True Range (ATR) for a 14-day period\n    atr = tr.rolling(window=14).mean()\n    \n    # Calculate the Relative Strength Index (RSI) for a 14-day period\n    delta = df['close'].diff(1)\n    gain = delta.where(delta > 0, 0)\n    loss = -delta.where(delta < 0, 0)\n    avg_gain = gain.rolling(window=14).mean()\n    avg_loss = loss.rolling(window=14).mean()\n    rs = avg_gain / avg_loss\n    rsi = 100 - (100 / (1 + rs))\n    \n    # Combine ATR and RSI into a single heuristic measure\n    heuristics_matrix = (atr + rsi) / 2\n    \n    return heuristics_matrix",
          "objective": -0.02323,
          "other_inf": null
     },
     {
          "algorithm": "The new algorithm calculates an alpha factor by combining the difference between 20-day and 100-day moving averages of the closing price with a modified RSI that is based on a 28-day window and uses the average of high, low, and close prices.",
          "code": "def heuristics_v2(df):\n    # Calculate short and long term moving averages for the closing price\n    short_term_ma = df['close'].rolling(window=20).mean()\n    long_term_ma = df['close'].rolling(window=100).mean()\n\n    # Calculate the modified RSI using the average of high, low, and close prices\n    avg_price = (df['high'] + df['low'] + df['close']) / 3\n    delta = avg_price.diff(1)\n    gain = (delta.where(delta > 0, 0)).rolling(window=28).mean()\n    loss = (-delta.where(delta < 0, 0)).rolling(window=28).mean()\n    rs = gain / loss\n    rsi = 100 - (100 / (1 + rs))\n\n    # Combine the MA difference and the modified RSI\n    ma_diff = short_term_ma - long_term_ma\n    heuristics_matrix = (ma_diff + rsi) / 2\n\n    return heuristics_matrix",
          "objective": -0.02299,
          "other_inf": null
     }
]