```python
import pandas as pd

def heuristics_v2(df):
    # Calculate Short-term (5 days) and Long-term (20 days) moving averages of the close prices
    df['short_ma'] = df['close'].rolling(window=5).mean()
    df['long_ma'] = df['close'].rolling(window=20).mean()
    df['ma_crossover'] = df['short_ma'] - df['long_ma']
    
    # Calculate EMA using short-term (5 days) and long-term (20 days) periods on close prices
    df['short_ema'] = df['close'].ewm(span=5, adjust=False).mean()
    df['long_ema'] = df['close'].ewm(span=20, adjust=False).mean()
    df['ema_crossover'] = df['short_ema'] - df['long_ema']
    
    # Compute the return from t-n to t, where n is 1, 5, 10, or 20 days
    for n in [1, 5, 10, 20]:
        df[f'return_{n}d'] = df['close'].pct_change(periods=n)
    
    # Measure the rate of change in the closing price over a period (e.g., 12 days)
    df['roc_12d'] = df['close'].pct_change(periods=12)
    
    # Calculate the upper and lower Bollinger Bands (typically 2 standard deviations from a 20-day moving average)
    df['middle_band'] = df['close'].rolling(window=20).mean()
    df['std_dev'] = df['close'].rolling(window=20).std()
    df['upper_band'] = df['middle_band'] + 2 * df['std_dev']
    df['lower_band'] = df['middle_band'] - 2 * df['std_dev']
    df['bb_width'] = (df['upper_band'] - df['lower_band']) / df['middle_band']
    
    # For each day, true range is the maximum of the current high less the current low, the absolute value of the current high less the previous close, and the absolute value of the current low less the previous close
    df['true_range'] = df.apply(
        lambda x: max(x['high'] - x['low'], abs(x['high'] - x['close'].shift(1)), abs(x['low'] - x['close'].shift(1))), 
        axis=1
    )
    df['tr_sum'] = df['true_range'].rolling(window=10).sum()
    
    # On-Balance Volume (OBV)
    df['obv'] = (df['close'].diff() > 0).astype(int) * df['volume'] - (df['close'].diff() < 0).astype(int) * df['volume']
    df['obv'] = df['obv'].cumsum()
    
    # Volume Weighted Average Price (VWAP)
    df['vwap'] = (df['close'] * df['volume']).cumsum() / df['volume'].cumsum()
    
    # Positive vs Negative Volume Index
    df['positive_volume_index'] = ((df['close'] > df['close'].shift(1)) & (df['volume'] > df['volume'].shift(1))).astype(int) * (df['volume'] - df['volume'].shift(1))
    df['negative_volume_index'] = ((df['close'] < df['close'].shift(1)) & (df['volume'] > df['volume'].shift(1))).astype(int) * (df['volume'] - df['volume'].shift(1))
    df['pvi_nvi'] = df['positive_volume_index'].cumsum() - df['negative_volume_index'].cumsum()
    
    # High-Low Ratio
    df['new_high'] = (df['close'] == df['close'].rolling(window=10).max()).astype(int)
    df['new_low'] = (df['close'] == df['close'].rolling(window=10).min()).astype(int)
    df['high_low_ratio'] = df['new_high'].rolling(window=10).sum() / df['new_low'].rolling(window=10).sum()
    
    # Inside Day Pattern
    df['inside_day'] = (df['high'] < df['high'].shift(1)) & (df['low'] > df['low'].shift(1))
    df['inside_day_factor'] = df['open'] - df['close']
    df['inside_day_factor'] = df['inside_day_factor'].where(df['inside_day'], 0)
    
    # Outside Day Pattern
    df['outside_day'] = (df
