```python
import pandas as pd

def heuristics_v2(df):
    # Trend Following Factors
    df['5_day_SMA'] = df['close'].rolling(window=5).mean()
    df['20_day_SMA'] = df['close'].rolling(window=20).mean()
    df['SMA_Crossover'] = df['5_day_SMA'] - df['20_day_SMA']
    
    df['Momentum_10_day'] = df['close'] - df['close'].shift(10)
    
    # Volume-based Factors
    df['Prev_Close'] = df['close'].shift(1)
    df['Volume_Dir'] = (df['close'] > df['Prev_Close']).astype(int)
    df['OBV'] = (df['volume'] * (2 * df['Volume_Dir'] - 1)).cumsum()
    
    df['5_day_Avg_Vol'] = df['volume'].rolling(window=5).mean()
    df['20_day_Avg_Vol'] = df['volume'].rolling(window=20).mean()
    df['Volume_Oscillator'] = (df['5_day_Avg_Vol'] / df['20_day_Avg_Vol']) - 1
    
    # Volatility-based Factors
    df['20_day_MA'] = df['close'].rolling(window=20).mean()
    df['20_day_STD'] = df['close'].rolling(window=20).std()
    df['Bollinger_Band'] = (df['close'] - df['20_day_MA']) / (2 * df['20_day_STD'])
    
    df['True_Range'] = df[['high', 'low']].diff(axis=1).iloc[:, 1].abs()
    df['ATR_14'] = df['True_Range'].rolling(window=14).mean()
    
    # Pattern Recognition Factors
    df['Inside_Bar'] = (df['high'] < df['high'].shift(1)) & (df['low'] > df['low'].shift(1)).astype(int)
    df['Outside_Bar'] = (df['high'] > df['high'].shift(1)) & (df['low'] < df['low'].shift(1)).astype(int)
    
    # Composite Factors
    df['Trend_Volume_Composite'] = df['SMA_Crossover'] * df['Volume_Oscillator']
    df['Volatility_Momentum_Composite'] = df['Bollinger_Band'] * df['Momentum_10_day']
    
    # Return the composite factor
    return df['Trend_Volume_Composite'] + df['Volatility_Momentum_Composite']
```
