```python
import pandas as pd

def heuristics_v2(df):
    # Calculate the 50-day SMA of closing prices
    df['SMA_50_close'] = df['close'].rolling(window=50).mean()
    
    # Use the difference between the current day's close price and the 50-day SMA as an alpha factor
    df['raw_alpha_factor'] = df['close'] - df['SMA_50_close']
    
    # Calculate the 20-day EMA of volume
    df['EMA_20_volume'] = df['volume'].ewm(span=20, adjust=False).mean()
    
    # Create a volume-based alpha factor by comparing today's volume to its 20-day EMA
    df['volume_factor'] = df['volume'] / df['EMA_20_volume']
    
    # Combine the SMA and volume factors to create a composite alpha factor
    df['composite_alpha_factor'] = df['raw_alpha_factor'] * df['volume_factor']
    
    # Calculate the 30-day EMA of high and low prices
    df['EMA_30_high'] = df['high'].ewm(span=30, adjust=False).mean()
    df['EMA_30_low'] = df['low'].ewm(span=30, adjust=False).mean()
    
    # Create a trend-following alpha factor using the difference between the 30-day EMA of high and low prices
    df['trend_following_alpha_factor'] = df['EMA_30_high'] - df['EMA_30_low']
    
    # Combine the composite alpha factor with the trend-following alpha factor
    df['enhanced_composite_alpha_factor'] = df['composite_alpha_factor'] + df['trend_following_alpha_factor']
    
    return df['enhanced_composite_alpha_factor']
```
