```python
def heuristics_v2(df: pd.DataFrame) -> pd.Series:
    # Calculate the difference between today's and yesterday's closing price
    df['price_diff'] = df['close'].diff()
    
    # Calculate the volume weighted average price (VWAP)
    df['vwap'] = (df['volume'] * (df['high'] + df['low'] + df['close']) / 3).cumsum() / df['volume'].cumsum()
    
    # Calculate the change in VWAP over the last 5 days
    df['vwap_change'] = df['vwap'].diff(periods=5)
    
    # Calculate the 5-day moving average of the high price
    ma_high_5 = df['high'].rolling(window=5).mean()
    
    # Calculate the 5-day moving average of the low price
    ma_low_5 = df['low'].rolling(window=5).mean()
    
    # Calculate the average volume over a 5 day window
    df['avg_volume_5d'] = df['volume'].rolling(window=5).mean()
    
    # Calculate the bid-ask spread as the difference between the high and low for each day
    df['bid_ask_spread'] = df['high'] - df['low']
    
    # Calculate the 5-day moving average of the bid-ask spread
    ma_bid_ask_spread_5 = df['bid_ask_spread'].rolling(window=5).mean()
    
    # Alpha factor: Combine VWAP change, relative position to 5-day MA of high and low, and adjust for the average volume and bid-ask spread
    alpha_factor = (df['vwap_change'] + (df['close'] - ma_high_5) - (df['close'] - ma_low_5)) / (df['avg_volume_5d'] * ma_bid_ask_spread_5 + 1e-7)
    
    return alpha_factor
```
