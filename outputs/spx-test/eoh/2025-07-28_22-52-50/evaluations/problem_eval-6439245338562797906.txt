def heuristics_v2(df):
    # Calculate RSI
    delta = df['close'].diff(1)
    gain = delta.where(delta > 0, 0)
    loss = -delta.where(delta < 0, 0)
    avg_gain = gain.rolling(window=14).mean()
    avg_loss = loss.rolling(window=14).mean()
    rs = avg_gain / avg_loss
    df['RSI'] = 100 - (100 / (1 + rs))

    # Calculate OBV
    df['OBV'] = (df['volume'] * ((df['close'] > df['close'].shift(1)).astype(int) - (df['close'] < df['close'].shift(1)).astype(int))).cumsum()

    # Calculate SMA crossovers
    sma_short_period = 10
    sma_long_period = 30
    df['SMA_Short'] = df['close'].rolling(window=sma_short_period).mean()
    df['SMA_Long'] = df['close'].rolling(window=sma_long_period).mean()
    sma_crossover = df['SMA_Short'] - df['SMA_Long']

    # Combined heuristic: RSI adjusted by OBV and SMA crossover
    heuristics_matrix = df['RSI'] + (df['OBV'] - df['OBV'].shift(sma_long_period)) * 0.01 * df['RSI'] + sma_crossover

    return heuristics_matrix
