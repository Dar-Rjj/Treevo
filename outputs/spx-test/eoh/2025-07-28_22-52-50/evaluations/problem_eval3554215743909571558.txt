import pandas as pd
    import numpy as np
    
    # Calculate the percent change for each column
    pct_change = df.pct_change()
    
    # Compute the rolling 30-day correlation matrix with future returns (close price shift)
    future_returns = df['close'].shift(-1).pct_change().fillna(0)
    rolling_corr = pct_change.rolling(window=30).corr(other=future_returns, pairwise=True)
    rolling_corr.index = pd.MultiIndex.from_tuples(rolling_corr.index)
    
    # Extract the correlation coefficients for each feature and compute the average correlation
    avg_corr = rolling_corr.groupby(level=1).mean()
    
    # Generate weights from the average correlations
    weights = avg_corr / avg_corr.sum()
    
    # Apply the weights to the percent changes
    weighted_features = (pct_change * weights.loc[pct_change.columns]).sum(axis=1)
    
    # Apply a non-linear transformation (e.g., sigmoid) to the weighted sum
    heuristics_matrix = 1 / (1 + np.exp(-weighted_features))
    
    return heuristics_matrix
