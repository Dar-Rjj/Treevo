import pandas as pd

def heuristics_v2(df):
    # Calculate CMF
    cmf_period = 14
    money_flow_multiplier = ((df['close'] - df['low']) - (df['high'] - df['close'])) / (df['high'] - df['low'])
    money_flow_volume = money_flow_multiplier * df['volume']
    cmf = money_flow_volume.rolling(window=cmf_period).sum() / df['volume'].rolling(window=cmf_period).sum()

    # Calculate Bollinger Bands
    bb_period = 20
    bb_std_dev = 2
    sma = df['close'].rolling(window=bb_period).mean()
    std = df['close'].rolling(window=bb_period).std()
    upper_band = sma + (std * bb_std_dev)
    lower_band = sma - (std * bb_std_dev)
    bollinger_range = (upper_band - lower_band)

    # Calculate PROC
    proc_period = 12
    proc = (df['close'] / df['close'].shift(proc_period) - 1) * 100

    # Combined heuristic: CMF, Bollinger Range, and PROC
    heuristics_matrix = cmf + (proc * bollinger_range)

    return heuristics_matrix
