def heuristics_v2(df):
    def compute_roc(price_series, n=21):
        return price_series.pct_change(n)

    def compute_cmf(high_series, low_series, close_series, volume_series, n=25):
        mfv = ((close_series - low_series) - (high_series - close_series)) / (high_series - low_series)
        mfv = mfv.fillna(0.0) * volume_series
        cmf = mfv.rolling(window=n).sum() / volume_series.rolling(window=n).sum()
        return cmf

    close_prices = df['close']
    high_prices = df['high']
    low_prices = df['low']
    volume = df['volume']

    roc_values = compute_roc(close_prices)
    cmf_values = compute_cmf(high_prices, low_prices, close_prices, volume)

    # Heuristic matrix: combination of ROC and CMF
    heuristics_matrix = (roc_values + cmf_values) / 2
    return heuristics_matrix
