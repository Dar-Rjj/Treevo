import pandas as pd

def heuristics_v2(df):
    def compute_ema(price_series, span=20):
        ema = price_series.ewm(span=span, min_periods=span).mean()
        return ema
    
    def compute_roc(series, periods=14):
        roc = series.pct_change(periods=periods)
        return roc
    
    def compute_atr(df, periods=14):
        high_low = df['high'] - df['low']
        high_close = (df['high'] - df['close'].shift()).abs()
        low_close = (df['low'] - df['close'].shift()).abs()
        
        ranges = pd.concat([high_low, high_close, low_close], axis=1)
        true_range = ranges.max(axis=1)
        
        atr = true_range.rolling(window=periods, min_periods=periods).mean()
        return atr
    
    close_prices = df['close']
    volume = df['volume']
    
    ema_values = compute_ema(close_prices)
    roc_values = compute_roc(volume)
    atr_values = compute_atr(df)
    
    # Heuristic matrix: combination of EMA, ROC, and ATR
    heuristics_matrix = (ema_values + roc_values + atr_values) / 3
    return heuristics_matrix
