def heuristics_v2(df):
    def calc_rate_of_change(data, window=10):
        data['ROC'] = (data['close'] - data['close'].shift(window)) / data['close'].shift(window)
        return data

    def calc_rsi(data, window=14):
        delta = data['close'].diff(1)
        gain = (delta.where(delta > 0, 0)).rolling(window=window).mean()
        loss = (-delta.where(delta < 0, 0)).rolling(window=window).mean()
        rs = gain / loss
        data['RSI'] = 100 - (100 / (1 + rs))
        return data

    def calc_atr(data, window=14):
        high_low = data['high'] - data['low']
        high_close = (data['high'] - data['close'].shift()).abs()
        low_close = (data['low'] - data['close'].shift()).abs()
        ranges = pd.concat([high_low, high_close, low_close], axis=1)
        true_range = ranges.max(axis=1)
        data['ATR'] = true_range.rolling(window=window).mean()
        return data

    df = calc_rate_of_change(df.copy())
    df = calc_rsi(df)
    df = calc_atr(df)

    df['Alpha_Factor'] = df['ROC'] + df['RSI'] - df['ATR']
    heuristics_matrix = df['Alpha_Factor']

    return heuristics_matrix
