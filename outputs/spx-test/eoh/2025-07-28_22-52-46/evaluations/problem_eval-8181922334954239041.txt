def heuristics_v2(df):
    # Compute the range (High - Low)
    df['range'] = df['high'] - df['low']
    
    # Compute the 10-day Average True Range (ATR)
    df['tr'] = df[['high' - df['low'], abs(df['high'] - df['close'].shift()), abs(df['low'] - df['close'].shift())]].max(axis=1)
    df['atr_10'] = df['tr'].ewm(span=10, adjust=False).mean()
    
    # Calculate the base heuristic: range / ATR
    df['base_heuristic'] = df['range'] / df['atr_10']
    
    # Calculate 10-day exponentially weighted moving average of daily returns
    df['daily_return'] = df['close'].pct_change()
    df['ewma_10'] = df['daily_return'].ewm(span=10, adjust=False).mean()
    
    # Generate heuristics matrix
    heuristics_matrix = df['base_heuristic'] * df['ewma_10']
    
    return heuristics_matrix
