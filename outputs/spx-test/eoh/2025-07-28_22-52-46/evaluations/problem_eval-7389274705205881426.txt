import pandas as pd

def heuristics_v2(df):
    short_window = 12
    long_window = 26
    signal_window = 9
    df['EMA_short'] = df['close'].ewm(span=short_window, adjust=False).mean()
    df['EMA_long'] = df['close'].ewm(span=long_window, adjust=False).mean()
    df['MACD'] = df['EMA_short'] - df['EMA_long']
    df['Signal_Line'] = df['MACD'].ewm(span=signal_window, adjust=False).mean()
    df['Volume_Ratio'] = df['volume'] / df['volume'].rolling(window=30).mean()
    heuristics_matrix = df['MACD'] + df['Signal_Line'] * df['Volume_Ratio']
    return heuristics_matrix
