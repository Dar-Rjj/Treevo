import pandas as pd

def heuristics_v2(df):
    # Calculate short-term and long-term moving averages
    ma_short = df['close'].rolling(window=10).mean()
    ma_long = df['close'].rolling(window=50).mean()
    
    # Price relative to moving averages
    rel_strength_short = df['close'] / ma_short
    rel_strength_long = df['close'] / ma_long
    
    # Volume rate of change
    vol_roc = df['volume'] / df['volume'].shift(10) - 1
    
    # Recent volatility (using standard deviation over a 20-day window)
    recent_volatility = df['close'].rolling(window=20).std()
    
    # Dynamic weights: higher volatility leads to lower weight for relative strength and higher for volume ROC
    weight_rel_strength = 1 / (1 + recent_volatility)
    weight_vol_roc = 1 - weight_rel_strength
    
    # Compute the heuristics matrix
    heuristics_matrix = (rel_strength_short * weight_rel_strength + 
                         rel_strength_long * weight_rel_strength + 
                         vol_roc * weight_vol_roc)
    
    return heuristics_matrix
