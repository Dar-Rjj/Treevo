import pandas as pd

def heuristics_v2(df):
    # Calculate the daily return
    df['daily_return'] = df['close'].pct_change()
    
    # Calculate the Average True Range (ATR) as a volatility measure
    df['tr'] = pd.DataFrame({'high-low': df['high'] - df['low'],
                             'high-close_prev': df['high'] - df['close'].shift(1),
                             'low-close_prev': df['low'] - df['close'].shift(1)}).max(axis=1)
    df['atr'] = df['tr'].rolling(window=14).mean()
    
    # Calculate the 50-day Simple Moving Average (SMA) as a trend-following indicator
    df['sma_50'] = df['close'].rolling(window=50).mean()
    
    # Calculate the liquidity metric as the ratio of the current day's volume to the 20-day average volume
    df['volume_ratio_20'] = df['volume'] / df['volume'].rolling(window=20).mean()
    
    # Generate the heuristic matrix
    heuristics_matrix = df['atr'] + df['sma_50'] + df['volume_ratio_20']
    
    return heuristics_matrix
