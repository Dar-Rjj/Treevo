import pandas as pd
    
    def calc_momentum_adjustment(price_series, window=10):
        return price_series.rolling(window).std() / price_series.shift(1)
    
    df['price_change'] = df['close'].diff()
    df['momentum_adj'] = calc_momentum_adjustment(df['close'])
    df['weighted_momentum'] = (df['price_change'] * df['momentum_adj']).shift(1)  # To avoid lookahead bias
    
    am_weights = [0.4, 0.3, 0.2, 0.1]  # Example weights for demonstration
    periods = [5, 10, 20, 40]  # Periods for the weighted moving averages
    
    for period, weight in zip(periods, am_weights):
        df[f'wma_{period}'] = df['weighted_momentum'].rolling(window=period).mean() * weight
        
    df['heuristic_factor'] = df[[f'wma_{p}' for p in periods]].sum(axis=1)
    heuristics_matrix = df['heuristic_factor']
    
    return heuristics_matrix
