def heuristics_v2(df):
    # Calculate the average of the high and low prices over a 14-day window
    avg_high_low = (df['high'] + df['low']) / 2
    
    # Calculate the ratio of closing price to the average of high and low
    close_to_avg_ratio = df['close'] / avg_high_low
    
    # Calculate the 14-day rate of change of the ratio
    roc_14d = close_to_avg_ratio.pct_change(14)
    
    # Calculate the 14-day RSI
    delta = df['close'].diff()
    up = delta.clip(lower=0)
    down = -delta.clip(upper=0)
    ema_up = up.ewm(com=13, adjust=False).mean()
    ema_down = down.ewm(com=13, adjust=False).mean()
    rs = ema_up / ema_down
    rsi_14d = 100 - (100 / (1 + rs))
    
    # Composite heuristic
    heuristics_matrix = (roc_14d + rsi_14d) / 2
    
    return heuristics_matrix
