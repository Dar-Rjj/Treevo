import pandas as pd

def heuristics_v2(df):
    # Calculate the 10-day EMA of the closing price
    ema_10 = df['close'].ewm(span=10, adjust=False).mean()
    
    # Calculate the highest high and lowest low over a 30-day period
    hh_30 = df['high'].rolling(window=30).max()
    ll_30 = df['low'].rolling(window=30).min()
    
    # Calculate the difference between the highest high and lowest low
    diff_hh_ll = hh_30 - ll_30
    
    # Combine the 10-day EMA and the difference between the highest high and lowest low
    combined_signal = ema_10 + diff_hh_ll
    
    # Apply a simple momentum indicator: subtract the 30-day lagged value from the current value
    heuristics_matrix = combined_signal - combined_signal.shift(30)
    
    return heuristics_matrix
